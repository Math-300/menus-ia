{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function createClient() {\r\n    const cookieStore = await cookies();\r\n\r\n    return createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch {\r\n                        // The `setAll` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,OAAO,IAAA,+LAAkB,sUAGrB;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,kEAAkE;gBACtE;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/app/%28tenant%29/%5Bslug%5D/layout.tsx"],"sourcesContent":["import { Metadata } from \"next\";\r\nimport { createClient } from '@/lib/supabase/server';\r\n\r\ninterface TenantLayoutProps {\r\n    children: React.ReactNode;\r\n    params: Promise<{\r\n        slug: string;\r\n    }>;\r\n}\r\n\r\n// Generar metadata dinámica para SEO\r\nexport async function generateMetadata({ params }: TenantLayoutProps): Promise<Metadata> {\r\n    const { slug } = await params;\r\n\r\n    try {\r\n        const supabase = await createClient();\r\n        const { data: tenant } = await supabase\r\n            .from('tenants')\r\n            .select('name, tagline, description, logo_url, primary_color')\r\n            .eq('slug', slug)\r\n            .single();\r\n\r\n        if (tenant) {\r\n            return {\r\n                title: `${tenant.name} - Menú Digital`,\r\n                description: tenant.description || tenant.tagline || `Explora el menú de ${tenant.name}`,\r\n                openGraph: {\r\n                    title: `${tenant.name} - Menú Digital`,\r\n                    description: tenant.description || tenant.tagline || `Explora el menú de ${tenant.name}`,\r\n                    images: tenant.logo_url ? [tenant.logo_url] : [],\r\n                    type: 'website',\r\n                },\r\n                themeColor: tenant.primary_color || '#f59e0b',\r\n            };\r\n        }\r\n    } catch (error) {\r\n        console.error('Error generating metadata:', error);\r\n    }\r\n\r\n    return {\r\n        title: \"MenuOS - Menú Digital\",\r\n        description: \"Explora nuestro menú digital interactivo\",\r\n    };\r\n}\r\n\r\nexport default async function TenantLayout({ children, params }: TenantLayoutProps) {\r\n    const { slug } = await params;\r\n\r\n    // Obtener configuración del tenant para el tema\r\n    let themeStyle = '';\r\n    let primaryColor = '#f59e0b';\r\n    let secondaryColor = '#1f2937';\r\n    let fontFamily = 'Inter';\r\n\r\n    try {\r\n        const supabase = await createClient();\r\n        const { data: tenant } = await supabase\r\n            .from('tenants')\r\n            .select('primary_color, secondary_color, font_family')\r\n            .eq('slug', slug)\r\n            .single();\r\n\r\n        if (tenant) {\r\n            primaryColor = tenant.primary_color || primaryColor;\r\n            secondaryColor = tenant.secondary_color || secondaryColor;\r\n            fontFamily = tenant.font_family || fontFamily;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching tenant theme:', error);\r\n    }\r\n\r\n    return (\r\n        <main\r\n            className=\"min-h-screen bg-background\"\r\n            style={{\r\n                '--color-brand-primary': primaryColor,\r\n                '--color-brand-secondary': secondaryColor,\r\n                '--font-sans': fontFamily,\r\n            } as React.CSSProperties}\r\n        >\r\n            {/* Inline script para aplicar tema inmediatamente */}\r\n            <script\r\n                dangerouslySetInnerHTML={{\r\n                    __html: `\r\n                        (function() {\r\n                            const root = document.documentElement;\r\n                            root.style.setProperty('--color-brand-primary', '${primaryColor}');\r\n                            root.style.setProperty('--color-brand-secondary', '${secondaryColor}');\r\n                            root.style.setProperty('--font-sans', '${fontFamily}');\r\n                        })();\r\n                    `,\r\n                }}\r\n            />\r\n            {children}\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;;;AAUO,eAAe,iBAAiB,EAAE,MAAM,EAAqB;IAChE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,IAAI;QACA,MAAM,WAAW,MAAM,IAAA,gJAAY;QACnC,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,WACL,MAAM,CAAC,uDACP,EAAE,CAAC,QAAQ,MACX,MAAM;QAEX,IAAI,QAAQ;YACR,OAAO;gBACH,OAAO,GAAG,OAAO,IAAI,CAAC,eAAe,CAAC;gBACtC,aAAa,OAAO,WAAW,IAAI,OAAO,OAAO,IAAI,CAAC,mBAAmB,EAAE,OAAO,IAAI,EAAE;gBACxF,WAAW;oBACP,OAAO,GAAG,OAAO,IAAI,CAAC,eAAe,CAAC;oBACtC,aAAa,OAAO,WAAW,IAAI,OAAO,OAAO,IAAI,CAAC,mBAAmB,EAAE,OAAO,IAAI,EAAE;oBACxF,QAAQ,OAAO,QAAQ,GAAG;wBAAC,OAAO,QAAQ;qBAAC,GAAG,EAAE;oBAChD,MAAM;gBACV;gBACA,YAAY,OAAO,aAAa,IAAI;YACxC;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;IAChD;IAEA,OAAO;QACH,OAAO;QACP,aAAa;IACjB;AACJ;AAEe,eAAe,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAqB;IAC9E,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,gDAAgD;IAChD,IAAI,aAAa;IACjB,IAAI,eAAe;IACnB,IAAI,iBAAiB;IACrB,IAAI,aAAa;IAEjB,IAAI;QACA,MAAM,WAAW,MAAM,IAAA,gJAAY;QACnC,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,WACL,MAAM,CAAC,+CACP,EAAE,CAAC,QAAQ,MACX,MAAM;QAEX,IAAI,QAAQ;YACR,eAAe,OAAO,aAAa,IAAI;YACvC,iBAAiB,OAAO,eAAe,IAAI;YAC3C,aAAa,OAAO,WAAW,IAAI;QACvC;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;IAClD;IAEA,qBACI,8OAAC;QACG,WAAU;QACV,OAAO;YACH,yBAAyB;YACzB,2BAA2B;YAC3B,eAAe;QACnB;;0BAGA,8OAAC;gBACG,yBAAyB;oBACrB,QAAQ,CAAC;;;6EAGgD,EAAE,aAAa;+EACb,EAAE,eAAe;mEAC7B,EAAE,WAAW;;oBAE5D,CAAC;gBACL;;;;;;YAEH;;;;;;;AAGb"}}]
}