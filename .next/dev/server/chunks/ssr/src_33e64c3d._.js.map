{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/hooks/useTenant.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface TenantSettings {\r\n    id: string;\r\n    name: string;\r\n    slug: string;\r\n    logo_url: string | null;\r\n    cover_url: string | null;\r\n    primary_color: string | null;\r\n    secondary_color: string | null;\r\n    font_family: string | null;\r\n    currency: string;\r\n    locale: string;\r\n    tagline: string | null;\r\n    description: string | null;\r\n    address: string | null;\r\n    phone: string | null;\r\n    whatsapp: string | null;\r\n    hours: Record<string, string> | null;\r\n    social_links: {\r\n        instagram?: string;\r\n        facebook?: string;\r\n        twitter?: string;\r\n        website?: string;\r\n    } | null;\r\n    settings: {\r\n        show_prices?: boolean;\r\n        show_descriptions?: boolean;\r\n        enable_orders?: boolean;\r\n        enable_chat?: boolean;\r\n        theme?: 'light' | 'dark' | 'auto';\r\n    } | null;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\nexport interface TenantFormData {\r\n    name?: string;\r\n    slug?: string;\r\n    logo_url?: string | null;\r\n    cover_url?: string | null;\r\n    primary_color?: string | null;\r\n    secondary_color?: string | null;\r\n    font_family?: string | null;\r\n    currency?: string;\r\n    locale?: string;\r\n    tagline?: string | null;\r\n    description?: string | null;\r\n    address?: string | null;\r\n    phone?: string | null;\r\n    whatsapp?: string | null;\r\n    hours?: Record<string, string> | null;\r\n    social_links?: TenantSettings['social_links'] | null;\r\n    settings?: TenantSettings['settings'] | null;\r\n}\r\n\r\ninterface UseTenantReturn {\r\n    tenant: TenantSettings | null;\r\n    userRole: string | null;\r\n    loading: boolean;\r\n    error: string | null;\r\n    fetchTenant: () => Promise<void>;\r\n    updateTenant: (data: TenantFormData) => Promise<TenantSettings | null>;\r\n}\r\n\r\nexport function useTenant(): UseTenantReturn {\r\n    const [tenant, setTenant] = useState<TenantSettings | null>(null);\r\n    const [userRole, setUserRole] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchTenant = useCallback(async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/tenant');\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener configuración');\r\n            }\r\n            const data = await response.json();\r\n            setTenant(data.tenant);\r\n            setUserRole(data.userRole);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateTenant = useCallback(async (formData: TenantFormData): Promise<TenantSettings | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/tenant', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar configuración');\r\n            }\r\n            const data = await response.json();\r\n            const updatedTenant = data.tenant;\r\n            setTenant(updatedTenant);\r\n            return updatedTenant;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchTenant();\r\n    }, [fetchTenant]);\r\n\r\n    return {\r\n        tenant,\r\n        userRole,\r\n        loading,\r\n        error,\r\n        fetchTenant,\r\n        updateTenant,\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAmEO,SAAS;IACZ,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAwB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC5B,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAClC;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,UAAU,KAAK,MAAM;YACrB,YAAY,KAAK,QAAQ;QAC7B,EAAE,OAAO,KAAK;YACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAClD,SAAU;YACN,WAAW;QACf;IACJ,GAAG,EAAE;IAEL,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACpC,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAC9C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAClC;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,gBAAgB,KAAK,MAAM;YACjC,UAAU;YACV,OAAO;QACX,EAAE,OAAO,KAAK;YACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,OAAO;QACX,SAAU;YACN,WAAW;QACf;IACJ,GAAG,EAAE;IAEL,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG;QAAC;KAAY;IAEhB,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/hooks/useOrders.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\n// Types based on Supabase schema\r\nexport type OrderStatus = 'pending' | 'confirmed' | 'preparing' | 'ready' | 'delivered' | 'cancelled';\r\nexport type PaymentStatus = 'pending' | 'paid' | 'failed' | 'refunded';\r\n\r\nexport interface OrderItem {\r\n    id: string;\r\n    order_id: string;\r\n    dish_id: string | null;\r\n    dish_name: string;\r\n    quantity: number;\r\n    unit_price: number;\r\n    total_price: number;\r\n    notes: string | null;\r\n    selected_options: Array<{\r\n        groupName: string;\r\n        optionName: string;\r\n        price: number;\r\n    }>;\r\n    created_at: string;\r\n}\r\n\r\nexport interface Order {\r\n    id: string;\r\n    tenant_id: string;\r\n    order_number: string;\r\n    table_number: string | null;\r\n    customer_name: string | null;\r\n    customer_phone: string | null;\r\n    customer_email: string | null;\r\n    status: OrderStatus;\r\n    payment_status: PaymentStatus;\r\n    subtotal: number;\r\n    tax: number;\r\n    total: number;\r\n    notes: string | null;\r\n    wompi_transaction_id: string | null;\r\n    created_at: string;\r\n    updated_at: string;\r\n    order_items?: OrderItem[];\r\n}\r\n\r\nexport interface OrderStats {\r\n    totalToday: number;\r\n    totalWeek: number;\r\n    totalMonth: number;\r\n    revenueToday: number;\r\n    revenueWeek: number;\r\n    revenueMonth: number;\r\n    byStatus: Record<OrderStatus, number>;\r\n    pending: number;\r\n    confirmed: number;\r\n    preparing: number;\r\n    ready: number;\r\n    delivered: number;\r\n    cancelled: number;\r\n}\r\n\r\nexport interface OrdersFilters {\r\n    status?: OrderStatus;\r\n    payment_status?: PaymentStatus;\r\n    from?: string;\r\n    to?: string;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\ninterface UseOrdersReturn {\r\n    orders: Order[];\r\n    loading: boolean;\r\n    error: string | null;\r\n    stats: OrderStats | null;\r\n    statsLoading: boolean;\r\n    pagination: {\r\n        page: number;\r\n        limit: number;\r\n        total: number;\r\n        totalPages: number;\r\n    };\r\n    fetchOrders: (filters?: OrdersFilters) => Promise<void>;\r\n    getOrder: (id: string) => Promise<Order | null>;\r\n    updateOrderStatus: (id: string, status: OrderStatus) => Promise<Order | null>;\r\n    fetchOrderStats: () => Promise<void>;\r\n    refreshOrders: () => Promise<void>;\r\n}\r\n\r\nexport function useOrders(initialFilters?: OrdersFilters): UseOrdersReturn {\r\n    const [orders, setOrders] = useState<Order[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [stats, setStats] = useState<OrderStats | null>(null);\r\n    const [statsLoading, setStatsLoading] = useState(false);\r\n    const [pagination, setPagination] = useState({\r\n        page: 1,\r\n        limit: 50,\r\n        total: 0,\r\n        totalPages: 0,\r\n    });\r\n    const [currentFilters, setCurrentFilters] = useState<OrdersFilters>(initialFilters || {});\r\n\r\n    const fetchOrders = useCallback(async (filters?: OrdersFilters) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const params = new URLSearchParams();\r\n            const finalFilters = filters || currentFilters;\r\n\r\n            if (finalFilters.status) {\r\n                params.append('status', finalFilters.status);\r\n            }\r\n            if (finalFilters.payment_status) {\r\n                params.append('payment_status', finalFilters.payment_status);\r\n            }\r\n            if (finalFilters.from) {\r\n                params.append('from', finalFilters.from);\r\n            }\r\n            if (finalFilters.to) {\r\n                params.append('to', finalFilters.to);\r\n            }\r\n            if (finalFilters.page) {\r\n                params.append('page', String(finalFilters.page));\r\n            }\r\n            if (finalFilters.limit) {\r\n                params.append('limit', String(finalFilters.limit));\r\n            }\r\n\r\n            const queryString = params.toString();\r\n            const url = `/api/admin/orders${queryString ? `?${queryString}` : ''}`;\r\n\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener pedidos');\r\n            }\r\n            const data = await response.json();\r\n            setOrders(data.orders || []);\r\n            setPagination(data.pagination || {\r\n                page: 1,\r\n                limit: 50,\r\n                total: 0,\r\n                totalPages: 0,\r\n            });\r\n            setCurrentFilters(finalFilters);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [currentFilters]);\r\n\r\n    const getOrder = useCallback(async (id: string): Promise<Order | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/orders/${id}`);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener pedido');\r\n            }\r\n            const data = await response.json();\r\n            return data.order;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateOrderStatus = useCallback(async (id: string, status: OrderStatus): Promise<Order | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/orders/${id}`, {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ status }),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar pedido');\r\n            }\r\n            const data = await response.json();\r\n            const updatedOrder = data.order;\r\n\r\n            // Update local state\r\n            setOrders(prev => prev.map(o => o.id === id ? updatedOrder : o));\r\n\r\n            // Refresh stats after status change\r\n            fetchOrderStats();\r\n\r\n            return updatedOrder;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const fetchOrderStats = useCallback(async () => {\r\n        setStatsLoading(true);\r\n        try {\r\n            const response = await fetch('/api/admin/stats');\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener estadísticas');\r\n            }\r\n            const data = await response.json();\r\n            setStats(data.orderStats || null);\r\n        } catch (err) {\r\n            console.error('Error fetching order stats:', err);\r\n        } finally {\r\n            setStatsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const refreshOrders = useCallback(async () => {\r\n        await fetchOrders(currentFilters);\r\n    }, [fetchOrders, currentFilters]);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchOrders();\r\n        fetchOrderStats();\r\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    return {\r\n        orders,\r\n        loading,\r\n        error,\r\n        stats,\r\n        statsLoading,\r\n        pagination,\r\n        fetchOrders,\r\n        getOrder,\r\n        updateOrderStatus,\r\n        fetchOrderStats,\r\n        refreshOrders,\r\n    };\r\n}\r\n\r\n// Utility functions for status display\r\nexport const statusColors: Record<OrderStatus, string> = {\r\n    pending: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',\r\n    confirmed: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n    preparing: 'bg-orange-500/20 text-orange-400 border-orange-500/30',\r\n    ready: 'bg-green-500/20 text-green-400 border-green-500/30',\r\n    delivered: 'bg-gray-500/20 text-gray-400 border-gray-500/30',\r\n    cancelled: 'bg-red-500/20 text-red-400 border-red-500/30',\r\n};\r\n\r\nexport const statusLabels: Record<OrderStatus, string> = {\r\n    pending: 'Pendiente',\r\n    confirmed: 'Confirmado',\r\n    preparing: 'Preparando',\r\n    ready: 'Listo',\r\n    delivered: 'Entregado',\r\n    cancelled: 'Cancelado',\r\n};\r\n\r\nexport const paymentStatusColors: Record<PaymentStatus, string> = {\r\n    pending: 'bg-yellow-500/20 text-yellow-400',\r\n    paid: 'bg-green-500/20 text-green-400',\r\n    failed: 'bg-red-500/20 text-red-400',\r\n    refunded: 'bg-purple-500/20 text-purple-400',\r\n};\r\n\r\nexport const paymentStatusLabels: Record<PaymentStatus, string> = {\r\n    pending: 'Pendiente',\r\n    paid: 'Pagado',\r\n    failed: 'Fallido',\r\n    refunded: 'Reembolsado',\r\n};\r\n\r\n// Status progression for timeline\r\nexport const statusOrder: OrderStatus[] = ['pending', 'confirmed', 'preparing', 'ready', 'delivered'];\r\n\r\n// Helper to get next status\r\nexport function getNextStatus(currentStatus: OrderStatus): OrderStatus | null {\r\n    const currentIndex = statusOrder.indexOf(currentStatus);\r\n    if (currentIndex === -1 || currentIndex === statusOrder.length - 1) {\r\n        return null;\r\n    }\r\n    return statusOrder[currentIndex + 1];\r\n}\r\n\r\n// Helper to format currency\r\nexport function formatCurrency(amount: number, currency: string = '$'): string {\r\n    return `${currency}${amount.toLocaleString('es-CO', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n}\r\n\r\n// Helper to format date\r\nexport function formatOrderDate(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('es-CO', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n    });\r\n}\r\n\r\n// Helper to get relative time\r\nexport function getRelativeTime(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'Ahora';\r\n    if (diffMins < 60) return `Hace ${diffMins} min`;\r\n    if (diffHours < 24) return `Hace ${diffHours}h`;\r\n    if (diffDays === 1) return 'Ayer';\r\n    if (diffDays < 7) return `Hace ${diffDays} días`;\r\n    return formatOrderDate(dateString);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    TrendingUp,\r\n    ShoppingBag,\r\n    DollarSign,\r\n    Clock,\r\n    ChefHat,\r\n    Package,\r\n    CheckCircle,\r\n    ArrowUpRight,\r\n    ArrowDownRight,\r\n    RefreshCw,\r\n    Eye\r\n} from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { useTenant } from '@/hooks/useTenant';\r\nimport { formatCurrency } from '@/hooks/useOrders';\r\n\r\ninterface OrderStats {\r\n    totalToday: number;\r\n    totalWeek: number;\r\n    totalMonth: number;\r\n    revenueToday: number;\r\n    revenueWeek: number;\r\n    revenueMonth: number;\r\n    byStatus: Record<string, number>;\r\n    pending: number;\r\n    confirmed: number;\r\n    preparing: number;\r\n    ready: number;\r\n    delivered: number;\r\n    cancelled: number;\r\n}\r\n\r\ninterface TopDish {\r\n    name: string;\r\n    quantity: number;\r\n    revenue: number;\r\n}\r\n\r\ninterface RecentOrder {\r\n    id: string;\r\n    order_number: string;\r\n    customer_name: string | null;\r\n    total: number;\r\n    status: string;\r\n    created_at: string;\r\n    items_count: number;\r\n}\r\n\r\ninterface OrdersPerDay {\r\n    date: string;\r\n    count: number;\r\n    revenue: number;\r\n}\r\n\r\ninterface DashboardStats {\r\n    orderStats: OrderStats;\r\n    topDishes: TopDish[];\r\n    recentOrders: RecentOrder[];\r\n    ordersPerDay: OrdersPerDay[];\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const { tenant } = useTenant();\r\n    const currency = tenant?.currency || '$';\r\n\r\n    const [stats, setStats] = useState<DashboardStats | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchStats = async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/stats');\r\n            if (!response.ok) {\r\n                throw new Error('Error al cargar estadísticas');\r\n            }\r\n            const data = await response.json();\r\n            setStats(data);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchStats();\r\n    }, []);\r\n\r\n    // Calculate max for chart\r\n    const maxOrders = Math.max(...(stats?.ordersPerDay?.map(d => d.count) || [1]));\r\n    const maxRevenue = Math.max(...(stats?.ordersPerDay?.map(d => d.revenue) || [1]));\r\n\r\n    // Format date for chart\r\n    const formatChartDate = (dateStr: string) => {\r\n        const date = new Date(dateStr);\r\n        return date.toLocaleDateString('es-CO', { weekday: 'short', day: 'numeric' });\r\n    };\r\n\r\n    // Get relative time\r\n    const getRelativeTime = (dateString: string): string => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - date.getTime();\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMins / 60);\r\n\r\n        if (diffMins < 1) return 'Ahora';\r\n        if (diffMins < 60) return `Hace ${diffMins} min`;\r\n        if (diffHours < 24) return `Hace ${diffHours}h`;\r\n        return date.toLocaleDateString('es-CO', { day: 'numeric', month: 'short' });\r\n    };\r\n\r\n    const statusColors: Record<string, string> = {\r\n        pending: 'bg-yellow-500',\r\n        confirmed: 'bg-blue-500',\r\n        preparing: 'bg-orange-500',\r\n        ready: 'bg-green-500',\r\n        delivered: 'bg-gray-500',\r\n        cancelled: 'bg-red-500',\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Dashboard</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Resumen de tu restaurante</p>\r\n                </div>\r\n                <button\r\n                    onClick={fetchStats}\r\n                    disabled={loading}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-gray-300 transition-colors disabled:opacity-50\"\r\n                >\r\n                    <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    Actualizar\r\n                </button>\r\n            </div>\r\n\r\n            {/* Error */}\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-red-400\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {/* Main Stats Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {/* Orders Today */}\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"p-2 bg-blue-500/20 rounded-lg\">\r\n                            <ShoppingBag className=\"w-5 h-5 text-blue-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-500\">Hoy</span>\r\n                    </div>\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"text-3xl font-bold text-white\">\r\n                            {loading ? '-' : stats?.orderStats.totalToday || 0}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-400\">Pedidos hoy</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Revenue Today */}\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"p-2 bg-green-500/20 rounded-lg\">\r\n                            <DollarSign className=\"w-5 h-5 text-green-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-500\">Hoy</span>\r\n                    </div>\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"text-3xl font-bold text-white\">\r\n                            {loading ? '-' : formatCurrency(stats?.orderStats.revenueToday || 0, currency)}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-400\">Ingresos hoy</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Orders Week */}\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"p-2 bg-purple-500/20 rounded-lg\">\r\n                            <TrendingUp className=\"w-5 h-5 text-purple-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-500\">Semana</span>\r\n                    </div>\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"text-3xl font-bold text-white\">\r\n                            {loading ? '-' : stats?.orderStats.totalWeek || 0}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-400\">Pedidos semana</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Revenue Month */}\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"p-2 bg-orange-500/20 rounded-lg\">\r\n                            <DollarSign className=\"w-5 h-5 text-orange-400\" />\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-500\">Mes</span>\r\n                    </div>\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"text-3xl font-bold text-white\">\r\n                            {loading ? '-' : formatCurrency(stats?.orderStats.revenueMonth || 0, currency)}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-400\">Ingresos mes</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Status Overview */}\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n                <div className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 text-center\">\r\n                    <Clock className=\"w-5 h-5 text-yellow-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-yellow-400\">{stats?.orderStats.pending || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Pendientes</div>\r\n                </div>\r\n                <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 text-center\">\r\n                    <CheckCircle className=\"w-5 h-5 text-blue-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-blue-400\">{stats?.orderStats.confirmed || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Confirmados</div>\r\n                </div>\r\n                <div className=\"bg-orange-500/10 border border-orange-500/30 rounded-xl p-4 text-center\">\r\n                    <ChefHat className=\"w-5 h-5 text-orange-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-orange-400\">{stats?.orderStats.preparing || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Preparando</div>\r\n                </div>\r\n                <div className=\"bg-green-500/10 border border-green-500/30 rounded-xl p-4 text-center\">\r\n                    <Package className=\"w-5 h-5 text-green-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-green-400\">{stats?.orderStats.ready || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Listos</div>\r\n                </div>\r\n                <div className=\"bg-gray-500/10 border border-gray-500/30 rounded-xl p-4 text-center\">\r\n                    <Package className=\"w-5 h-5 text-gray-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-gray-400\">{stats?.orderStats.delivered || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Entregados</div>\r\n                </div>\r\n                <div className=\"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-center\">\r\n                    <Package className=\"w-5 h-5 text-red-400 mx-auto mb-2\" />\r\n                    <div className=\"text-2xl font-bold text-red-400\">{stats?.orderStats.cancelled || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Cancelados</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Orders Chart */}\r\n                <div className=\"lg:col-span-2 bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <h3 className=\"text-lg font-semibold text-white mb-4\">Pedidos últimos 7 días</h3>\r\n                    {loading ? (\r\n                        <div className=\"h-48 flex items-center justify-center\">\r\n                            <RefreshCw className=\"w-8 h-8 text-gray-500 animate-spin\" />\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"h-48 flex items-end gap-2\">\r\n                            {stats?.ordersPerDay?.map((day, index) => (\r\n                                <div key={day.date} className=\"flex-1 flex flex-col items-center gap-2\">\r\n                                    <div className=\"w-full flex flex-col items-center\">\r\n                                        <span className=\"text-xs text-gray-400 mb-1\">\r\n                                            {formatCurrency(day.revenue, currency)}\r\n                                        </span>\r\n                                        <div\r\n                                            className=\"w-full bg-brand-primary/80 rounded-t transition-all hover:bg-brand-primary\"\r\n                                            style={{\r\n                                                height: `${Math.max((day.count / maxOrders) * 120, 8)}px`,\r\n                                            }}\r\n                                            title={`${day.count} pedidos`}\r\n                                        />\r\n                                    </div>\r\n                                    <span className=\"text-xs text-gray-500\">{formatChartDate(day.date)}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Top Dishes */}\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-5\">\r\n                    <h3 className=\"text-lg font-semibold text-white mb-4\">Top 5 Platos</h3>\r\n                    {loading ? (\r\n                        <div className=\"h-48 flex items-center justify-center\">\r\n                            <RefreshCw className=\"w-8 h-8 text-gray-500 animate-spin\" />\r\n                        </div>\r\n                    ) : stats?.topDishes?.length === 0 ? (\r\n                        <div className=\"h-48 flex items-center justify-center text-gray-500\">\r\n                            Sin datos aún\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {stats?.topDishes?.map((dish, index) => (\r\n                                <div key={dish.name} className=\"flex items-center gap-3\">\r\n                                    <div className={`\r\n                                        w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold\r\n                                        ${index === 0 ? 'bg-yellow-500/20 text-yellow-400' :\r\n                                            index === 1 ? 'bg-gray-400/20 text-gray-400' :\r\n                                                index === 2 ? 'bg-orange-500/20 text-orange-400' :\r\n                                                    'bg-white/10 text-gray-500'}\r\n                                    `}>\r\n                                        {index + 1}\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"text-white truncate\">{dish.name}</div>\r\n                                        <div className=\"text-xs text-gray-500\">\r\n                                            {dish.quantity} vendidos · {formatCurrency(dish.revenue, currency)}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Recent Orders */}\r\n            <div className=\"bg-white/5 border border-white/10 rounded-xl overflow-hidden\">\r\n                <div className=\"flex items-center justify-between p-5 border-b border-white/10\">\r\n                    <h3 className=\"text-lg font-semibold text-white\">Pedidos Recientes</h3>\r\n                    <Link\r\n                        href=\"/admin/orders\"\r\n                        className=\"text-sm text-brand-primary hover:text-brand-primary/80 flex items-center gap-1\"\r\n                    >\r\n                        Ver todos <Eye className=\"w-4 h-4\" />\r\n                    </Link>\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className=\"p-8 flex items-center justify-center\">\r\n                        <RefreshCw className=\"w-8 h-8 text-gray-500 animate-spin\" />\r\n                    </div>\r\n                ) : stats?.recentOrders?.length === 0 ? (\r\n                    <div className=\"p-8 text-center text-gray-500\">\r\n                        No hay pedidos recientes\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"divide-y divide-white/5\">\r\n                        {stats?.recentOrders?.map((order) => (\r\n                            <Link\r\n                                key={order.id}\r\n                                href={`/admin/orders?id=${order.id}`}\r\n                                className=\"flex items-center justify-between p-4 hover:bg-white/5 transition-colors\"\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={`w-2 h-2 rounded-full ${statusColors[order.status] || 'bg-gray-500'}`} />\r\n                                    <div>\r\n                                        <div className=\"text-white font-medium\">#{order.order_number}</div>\r\n                                        <div className=\"text-sm text-gray-500\">\r\n                                            {order.customer_name || 'Sin nombre'} · {order.items_count} items\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className=\"text-white font-medium\">\r\n                                        {formatCurrency(order.total, currency)}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-500\">\r\n                                        {getRelativeTime(order.created_at)}\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n                <Link\r\n                    href=\"/admin/menu\"\r\n                    className=\"bg-white/5 border border-white/10 rounded-xl p-5 hover:bg-white/10 transition-colors flex items-center gap-4\"\r\n                >\r\n                    <div className=\"p-3 bg-brand-primary/20 rounded-lg\">\r\n                        <ShoppingBag className=\"w-6 h-6 text-brand-primary\" />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"text-white font-medium\">Gestionar Menú</div>\r\n                        <div className=\"text-sm text-gray-500\">Agregar o editar platos</div>\r\n                    </div>\r\n                </Link>\r\n\r\n                <Link\r\n                    href=\"/admin/stories\"\r\n                    className=\"bg-white/5 border border-white/10 rounded-xl p-5 hover:bg-white/10 transition-colors flex items-center gap-4\"\r\n                >\r\n                    <div className=\"p-3 bg-purple-500/20 rounded-lg\">\r\n                        <TrendingUp className=\"w-6 h-6 text-purple-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"text-white font-medium\">Stories</div>\r\n                        <div className=\"text-sm text-gray-500\">Crear promociones</div>\r\n                    </div>\r\n                </Link>\r\n\r\n                <Link\r\n                    href=\"/admin/branding\"\r\n                    className=\"bg-white/5 border border-white/10 rounded-xl p-5 hover:bg-white/10 transition-colors flex items-center gap-4\"\r\n                >\r\n                    <div className=\"p-3 bg-blue-500/20 rounded-lg\">\r\n                        <DollarSign className=\"w-6 h-6 text-blue-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"text-white font-medium\">Branding</div>\r\n                        <div className=\"text-sm text-gray-500\">Personalizar tu menú</div>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}