{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/hooks/useOrders.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\n// Types based on Supabase schema\r\nexport type OrderStatus = 'pending' | 'confirmed' | 'preparing' | 'ready' | 'delivered' | 'cancelled';\r\nexport type PaymentStatus = 'pending' | 'paid' | 'failed' | 'refunded';\r\n\r\nexport interface OrderItem {\r\n    id: string;\r\n    order_id: string;\r\n    dish_id: string | null;\r\n    dish_name: string;\r\n    quantity: number;\r\n    unit_price: number;\r\n    total_price: number;\r\n    notes: string | null;\r\n    selected_options: Array<{\r\n        groupName: string;\r\n        optionName: string;\r\n        price: number;\r\n    }>;\r\n    created_at: string;\r\n}\r\n\r\nexport interface Order {\r\n    id: string;\r\n    tenant_id: string;\r\n    order_number: string;\r\n    table_number: string | null;\r\n    customer_name: string | null;\r\n    customer_phone: string | null;\r\n    customer_email: string | null;\r\n    status: OrderStatus;\r\n    payment_status: PaymentStatus;\r\n    subtotal: number;\r\n    tax: number;\r\n    total: number;\r\n    notes: string | null;\r\n    wompi_transaction_id: string | null;\r\n    created_at: string;\r\n    updated_at: string;\r\n    order_items?: OrderItem[];\r\n}\r\n\r\nexport interface OrderStats {\r\n    totalToday: number;\r\n    totalWeek: number;\r\n    totalMonth: number;\r\n    revenueToday: number;\r\n    revenueWeek: number;\r\n    revenueMonth: number;\r\n    byStatus: Record<OrderStatus, number>;\r\n    pending: number;\r\n    confirmed: number;\r\n    preparing: number;\r\n    ready: number;\r\n    delivered: number;\r\n    cancelled: number;\r\n}\r\n\r\nexport interface OrdersFilters {\r\n    status?: OrderStatus;\r\n    payment_status?: PaymentStatus;\r\n    from?: string;\r\n    to?: string;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\ninterface UseOrdersReturn {\r\n    orders: Order[];\r\n    loading: boolean;\r\n    error: string | null;\r\n    stats: OrderStats | null;\r\n    statsLoading: boolean;\r\n    pagination: {\r\n        page: number;\r\n        limit: number;\r\n        total: number;\r\n        totalPages: number;\r\n    };\r\n    fetchOrders: (filters?: OrdersFilters) => Promise<void>;\r\n    getOrder: (id: string) => Promise<Order | null>;\r\n    updateOrderStatus: (id: string, status: OrderStatus) => Promise<Order | null>;\r\n    fetchOrderStats: () => Promise<void>;\r\n    refreshOrders: () => Promise<void>;\r\n}\r\n\r\nexport function useOrders(initialFilters?: OrdersFilters): UseOrdersReturn {\r\n    const [orders, setOrders] = useState<Order[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [stats, setStats] = useState<OrderStats | null>(null);\r\n    const [statsLoading, setStatsLoading] = useState(false);\r\n    const [pagination, setPagination] = useState({\r\n        page: 1,\r\n        limit: 50,\r\n        total: 0,\r\n        totalPages: 0,\r\n    });\r\n    const [currentFilters, setCurrentFilters] = useState<OrdersFilters>(initialFilters || {});\r\n\r\n    const fetchOrders = useCallback(async (filters?: OrdersFilters) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const params = new URLSearchParams();\r\n            const finalFilters = filters || currentFilters;\r\n\r\n            if (finalFilters.status) {\r\n                params.append('status', finalFilters.status);\r\n            }\r\n            if (finalFilters.payment_status) {\r\n                params.append('payment_status', finalFilters.payment_status);\r\n            }\r\n            if (finalFilters.from) {\r\n                params.append('from', finalFilters.from);\r\n            }\r\n            if (finalFilters.to) {\r\n                params.append('to', finalFilters.to);\r\n            }\r\n            if (finalFilters.page) {\r\n                params.append('page', String(finalFilters.page));\r\n            }\r\n            if (finalFilters.limit) {\r\n                params.append('limit', String(finalFilters.limit));\r\n            }\r\n\r\n            const queryString = params.toString();\r\n            const url = `/api/admin/orders${queryString ? `?${queryString}` : ''}`;\r\n\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener pedidos');\r\n            }\r\n            const data = await response.json();\r\n            setOrders(data.orders || []);\r\n            setPagination(data.pagination || {\r\n                page: 1,\r\n                limit: 50,\r\n                total: 0,\r\n                totalPages: 0,\r\n            });\r\n            setCurrentFilters(finalFilters);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [currentFilters]);\r\n\r\n    const getOrder = useCallback(async (id: string): Promise<Order | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/orders/${id}`);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener pedido');\r\n            }\r\n            const data = await response.json();\r\n            return data.order;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateOrderStatus = useCallback(async (id: string, status: OrderStatus): Promise<Order | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/orders/${id}`, {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ status }),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar pedido');\r\n            }\r\n            const data = await response.json();\r\n            const updatedOrder = data.order;\r\n\r\n            // Update local state\r\n            setOrders(prev => prev.map(o => o.id === id ? updatedOrder : o));\r\n\r\n            // Refresh stats after status change\r\n            fetchOrderStats();\r\n\r\n            return updatedOrder;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const fetchOrderStats = useCallback(async () => {\r\n        setStatsLoading(true);\r\n        try {\r\n            const response = await fetch('/api/admin/stats');\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener estad铆sticas');\r\n            }\r\n            const data = await response.json();\r\n            setStats(data.orderStats || null);\r\n        } catch (err) {\r\n            console.error('Error fetching order stats:', err);\r\n        } finally {\r\n            setStatsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const refreshOrders = useCallback(async () => {\r\n        await fetchOrders(currentFilters);\r\n    }, [fetchOrders, currentFilters]);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchOrders();\r\n        fetchOrderStats();\r\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    return {\r\n        orders,\r\n        loading,\r\n        error,\r\n        stats,\r\n        statsLoading,\r\n        pagination,\r\n        fetchOrders,\r\n        getOrder,\r\n        updateOrderStatus,\r\n        fetchOrderStats,\r\n        refreshOrders,\r\n    };\r\n}\r\n\r\n// Utility functions for status display\r\nexport const statusColors: Record<OrderStatus, string> = {\r\n    pending: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',\r\n    confirmed: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n    preparing: 'bg-orange-500/20 text-orange-400 border-orange-500/30',\r\n    ready: 'bg-green-500/20 text-green-400 border-green-500/30',\r\n    delivered: 'bg-gray-500/20 text-gray-400 border-gray-500/30',\r\n    cancelled: 'bg-red-500/20 text-red-400 border-red-500/30',\r\n};\r\n\r\nexport const statusLabels: Record<OrderStatus, string> = {\r\n    pending: 'Pendiente',\r\n    confirmed: 'Confirmado',\r\n    preparing: 'Preparando',\r\n    ready: 'Listo',\r\n    delivered: 'Entregado',\r\n    cancelled: 'Cancelado',\r\n};\r\n\r\nexport const paymentStatusColors: Record<PaymentStatus, string> = {\r\n    pending: 'bg-yellow-500/20 text-yellow-400',\r\n    paid: 'bg-green-500/20 text-green-400',\r\n    failed: 'bg-red-500/20 text-red-400',\r\n    refunded: 'bg-purple-500/20 text-purple-400',\r\n};\r\n\r\nexport const paymentStatusLabels: Record<PaymentStatus, string> = {\r\n    pending: 'Pendiente',\r\n    paid: 'Pagado',\r\n    failed: 'Fallido',\r\n    refunded: 'Reembolsado',\r\n};\r\n\r\n// Status progression for timeline\r\nexport const statusOrder: OrderStatus[] = ['pending', 'confirmed', 'preparing', 'ready', 'delivered'];\r\n\r\n// Helper to get next status\r\nexport function getNextStatus(currentStatus: OrderStatus): OrderStatus | null {\r\n    const currentIndex = statusOrder.indexOf(currentStatus);\r\n    if (currentIndex === -1 || currentIndex === statusOrder.length - 1) {\r\n        return null;\r\n    }\r\n    return statusOrder[currentIndex + 1];\r\n}\r\n\r\n// Helper to format currency\r\nexport function formatCurrency(amount: number, currency: string = '$'): string {\r\n    return `${currency}${amount.toLocaleString('es-CO', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n}\r\n\r\n// Helper to format date\r\nexport function formatOrderDate(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('es-CO', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n    });\r\n}\r\n\r\n// Helper to get relative time\r\nexport function getRelativeTime(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'Ahora';\r\n    if (diffMins < 60) return `Hace ${diffMins} min`;\r\n    if (diffHours < 24) return `Hace ${diffHours}h`;\r\n    if (diffDays === 1) return 'Ayer';\r\n    if (diffDays < 7) return `Hace ${diffDays} d铆as`;\r\n    return formatOrderDate(dateString);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/components/ui/Modal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef } from 'react';\nimport { X } from 'lucide-react';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n  title?: string;\n  variant?: 'default' | 'immersive';\n}\n\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, children, title, variant = 'default' }) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleOutsideClick = (event: MouseEvent) => {\n      if (modalRef.current && !modalRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleOutsideClick);\n      document.body.style.overflow = 'hidden';\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleOutsideClick);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  const isImmersive = variant === 'immersive';\n\n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-end md:items-center justify-center bg-black/80 backdrop-blur-sm p-0 md:p-6 animate-fade-in\">\n      <div\n        ref={modalRef}\n        className={`\n            bg-gray-900/90 backdrop-blur-xl border border-white/10 rounded-t-[2.5rem] md:rounded-[2.5rem] w-full max-w-2xl overflow-hidden shadow-2xl transform transition-all animate-slide-up h-[90vh] md:h-auto md:max-h-[90vh] flex flex-col\n            ${isImmersive ? 'p-0' : 'p-0 md:p-6'} \n        `}\n      >\n        {/* Header */}\n        <div className={`\n            flex justify-between items-center absolute top-0 left-0 right-0 z-20 pointer-events-none\n            ${isImmersive ? 'p-6 bg-gradient-to-b from-black/60 to-transparent' : 'p-6 bg-transparent'}\n        `}>\n          <h3 className=\"text-lg font-serif italic text-white/90 drop-shadow-md\">{title}</h3>\n\n          <button onClick={onClose} className=\"pointer-events-auto p-2.5 bg-black/40 backdrop-blur-md rounded-full border border-white/10 hover:bg-white hover:text-black transition-all text-white shadow-lg group\">\n            <X size={20} className=\"group-hover:rotate-90 transition-transform duration-300\" />\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto overscroll-contain no-scrollbar\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAaO,MAAM,QAA8B,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,SAAS,EAAE;IACnG,MAAM,WAAW,IAAA,+MAAM,EAAiB;IAExC,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,SAAS,OAAO,IAAI,CAAC,SAAS,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACxE;YACF;QACF;QAEA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QAEA,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;YAC1C,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,cAAc,YAAY;IAEhC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAC;;YAER,EAAE,cAAc,QAAQ,aAAa;QACzC,CAAC;;8BAGD,8OAAC;oBAAI,WAAW,CAAC;;YAEb,EAAE,cAAc,sDAAsD,qBAAqB;QAC/F,CAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA0D;;;;;;sCAExE,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAClC,cAAA,8OAAC,iMAAC;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;;;;;;;8BAI3B,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/components/admin/OrderDetail.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n    X,\r\n    User,\r\n    Phone,\r\n    Mail,\r\n    MapPin,\r\n    Clock,\r\n    CreditCard,\r\n    ChefHat,\r\n    CheckCircle,\r\n    AlertCircle,\r\n    Package,\r\n    Truck,\r\n    Ban\r\n} from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport {\r\n    Order,\r\n    OrderStatus,\r\n    statusColors,\r\n    statusLabels,\r\n    paymentStatusColors,\r\n    paymentStatusLabels,\r\n    statusOrder,\r\n    formatCurrency,\r\n    formatOrderDate,\r\n    getRelativeTime,\r\n    getNextStatus,\r\n} from '@/hooks/useOrders';\r\n\r\ninterface OrderDetailProps {\r\n    order: Order | null;\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onUpdateStatus: (id: string, status: OrderStatus) => Promise<Order | null>;\r\n    currency?: string;\r\n}\r\n\r\nconst statusIcons: Record<OrderStatus, React.ReactNode> = {\r\n    pending: <Clock className=\"w-4 h-4\" />,\r\n    confirmed: <CheckCircle className=\"w-4 h-4\" />,\r\n    preparing: <ChefHat className=\"w-4 h-4\" />,\r\n    ready: <Package className=\"w-4 h-4\" />,\r\n    delivered: <Truck className=\"w-4 h-4\" />,\r\n    cancelled: <Ban className=\"w-4 h-4\" />,\r\n};\r\n\r\nexport function OrderDetail({\r\n    order,\r\n    isOpen,\r\n    onClose,\r\n    onUpdateStatus,\r\n    currency = '$'\r\n}: OrderDetailProps) {\r\n    const [updating, setUpdating] = useState(false);\r\n    const [selectedStatus, setSelectedStatus] = useState<OrderStatus | null>(null);\r\n\r\n    if (!order) return null;\r\n\r\n    const handleStatusChange = async (newStatus: OrderStatus) => {\r\n        setUpdating(true);\r\n        setSelectedStatus(newStatus);\r\n        try {\r\n            await onUpdateStatus(order.id, newStatus);\r\n        } finally {\r\n            setUpdating(false);\r\n            setSelectedStatus(null);\r\n        }\r\n    };\r\n\r\n    const nextStatus = getNextStatus(order.status);\r\n    const currentIndex = statusOrder.indexOf(order.status);\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose}>\r\n            <div className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-gray-900 rounded-2xl border border-white/10\">\r\n                {/* Header */}\r\n                <div className=\"sticky top-0 bg-gray-900/95 backdrop-blur-sm border-b border-white/10 p-4 flex items-center justify-between z-10\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-white\">\r\n                            Orden #{order.order_number}\r\n                        </h2>\r\n                        <p className=\"text-sm text-gray-400\">\r\n                            {formatOrderDate(order.created_at)} 路 {getRelativeTime(order.created_at)}\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\r\n                    >\r\n                        <X className=\"w-5 h-5 text-gray-400\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-4 space-y-6\">\r\n                    {/* Status Timeline */}\r\n                    <div className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\r\n                        <h3 className=\"text-sm font-medium text-gray-400 mb-4\">Estado del Pedido</h3>\r\n                        <div className=\"flex items-center justify-between\">\r\n                            {statusOrder.map((status, index) => {\r\n                                const isActive = index <= currentIndex && order.status !== 'cancelled';\r\n                                const isCurrent = status === order.status;\r\n                                const isCancelled = order.status === 'cancelled';\r\n\r\n                                return (\r\n                                    <div key={status} className=\"flex flex-col items-center flex-1\">\r\n                                        <div\r\n                                            className={`\r\n                                                w-10 h-10 rounded-full flex items-center justify-center\r\n                                                ${isCurrent && !isCancelled\r\n                                                    ? 'bg-brand-primary text-white ring-4 ring-brand-primary/30'\r\n                                                    : isActive && !isCancelled\r\n                                                        ? 'bg-green-500 text-white'\r\n                                                        : 'bg-white/10 text-gray-500'\r\n                                                }\r\n                                                transition-all\r\n                                            `}\r\n                                        >\r\n                                            {statusIcons[status]}\r\n                                        </div>\r\n                                        <span className={`\r\n                                            text-xs mt-2 text-center\r\n                                            ${isCurrent && !isCancelled\r\n                                                ? 'text-white font-medium'\r\n                                                : isActive && !isCancelled\r\n                                                    ? 'text-green-400'\r\n                                                    : 'text-gray-500'\r\n                                            }\r\n                                        `}>\r\n                                            {statusLabels[status]}\r\n                                        </span>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n\r\n                        {order.status === 'cancelled' && (\r\n                            <div className=\"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2\">\r\n                                <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n                                <span className=\"text-red-400 text-sm\">Este pedido fue cancelado</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Customer Info */}\r\n                    <div className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\r\n                        <h3 className=\"text-sm font-medium text-gray-400 mb-3\">Informaci贸n del Cliente</h3>\r\n                        <div className=\"space-y-2\">\r\n                            {order.customer_name && (\r\n                                <div className=\"flex items-center gap-3 text-gray-300\">\r\n                                    <User className=\"w-4 h-4 text-gray-500\" />\r\n                                    <span>{order.customer_name}</span>\r\n                                </div>\r\n                            )}\r\n                            {order.table_number && (\r\n                                <div className=\"flex items-center gap-3 text-gray-300\">\r\n                                    <MapPin className=\"w-4 h-4 text-gray-500\" />\r\n                                    <span>Mesa {order.table_number}</span>\r\n                                </div>\r\n                            )}\r\n                            {order.customer_phone && (\r\n                                <div className=\"flex items-center gap-3 text-gray-300\">\r\n                                    <Phone className=\"w-4 h-4 text-gray-500\" />\r\n                                    <span>{order.customer_phone}</span>\r\n                                </div>\r\n                            )}\r\n                            {order.customer_email && (\r\n                                <div className=\"flex items-center gap-3 text-gray-300\">\r\n                                    <Mail className=\"w-4 h-4 text-gray-500\" />\r\n                                    <span>{order.customer_email}</span>\r\n                                </div>\r\n                            )}\r\n                            {!order.customer_name && !order.table_number && !order.customer_phone && !order.customer_email && (\r\n                                <p className=\"text-gray-500 text-sm\">Sin informaci贸n de cliente</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Order Items */}\r\n                    <div className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\r\n                        <h3 className=\"text-sm font-medium text-gray-400 mb-3\">Items del Pedido</h3>\r\n                        <div className=\"space-y-3\">\r\n                            {order.order_items?.map((item) => (\r\n                                <div key={item.id} className=\"flex justify-between items-start py-2 border-b border-white/5 last:border-0\">\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"text-white font-medium\">{item.quantity}x</span>\r\n                                            <span className=\"text-gray-200\">{item.dish_name}</span>\r\n                                        </div>\r\n                                        {item.selected_options && item.selected_options.length > 0 && (\r\n                                            <div className=\"mt-1 ml-6\">\r\n                                                {item.selected_options.map((opt, i) => (\r\n                                                    <span key={i} className=\"text-xs text-gray-500\">\r\n                                                        + {opt.optionName} {opt.price > 0 && `(+${formatCurrency(opt.price, currency)})`}\r\n                                                    </span>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                        {item.notes && (\r\n                                            <p className=\"text-xs text-yellow-400/80 mt-1 ml-6\">\r\n                                                 {item.notes}\r\n                                            </p>\r\n                                        )}\r\n                                    </div>\r\n                                    <span className=\"text-gray-300 font-medium\">\r\n                                        {formatCurrency(item.total_price, currency)}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Payment Summary */}\r\n                    <div className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\r\n                        <h3 className=\"text-sm font-medium text-gray-400 mb-3\">Resumen de Pago</h3>\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"flex justify-between text-gray-300\">\r\n                                <span>Subtotal</span>\r\n                                <span>{formatCurrency(order.subtotal, currency)}</span>\r\n                            </div>\r\n                            {order.tax > 0 && (\r\n                                <div className=\"flex justify-between text-gray-300\">\r\n                                    <span>Impuestos</span>\r\n                                    <span>{formatCurrency(order.tax, currency)}</span>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"flex justify-between text-white font-bold text-lg pt-2 border-t border-white/10\">\r\n                                <span>Total</span>\r\n                                <span>{formatCurrency(order.total, currency)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-4 flex items-center gap-2\">\r\n                            <CreditCard className=\"w-4 h-4 text-gray-500\" />\r\n                            <span className={`text-sm px-2 py-1 rounded-full ${paymentStatusColors[order.payment_status]}`}>\r\n                                {paymentStatusLabels[order.payment_status]}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Notes */}\r\n                    {order.notes && (\r\n                        <div className=\"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30\">\r\n                            <h3 className=\"text-sm font-medium text-yellow-400 mb-2\">Notas del Pedido</h3>\r\n                            <p className=\"text-gray-300\">{order.notes}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Action Buttons */}\r\n                    {order.status !== 'cancelled' && order.status !== 'delivered' && (\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {nextStatus && (\r\n                                <button\r\n                                    onClick={() => handleStatusChange(nextStatus)}\r\n                                    disabled={updating}\r\n                                    className={`\r\n                                        flex-1 py-3 px-4 rounded-xl font-medium\r\n                                        bg-brand-primary text-white\r\n                                        hover:bg-brand-primary/80 transition-colors\r\n                                        disabled:opacity-50 disabled:cursor-not-allowed\r\n                                        flex items-center justify-center gap-2\r\n                                    `}\r\n                                >\r\n                                    {updating && selectedStatus === nextStatus ? (\r\n                                        <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                    ) : (\r\n                                        <>\r\n                                            {statusIcons[nextStatus]}\r\n                                            Marcar como {statusLabels[nextStatus]}\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={() => handleStatusChange('cancelled')}\r\n                                disabled={updating}\r\n                                className={`\r\n                                    py-3 px-4 rounded-xl font-medium\r\n                                    bg-red-500/20 text-red-400 border border-red-500/30\r\n                                    hover:bg-red-500/30 transition-colors\r\n                                    disabled:opacity-50 disabled:cursor-not-allowed\r\n                                `}\r\n                            >\r\n                                {updating && selectedStatus === 'cancelled' ? (\r\n                                    <div className=\"w-5 h-5 border-2 border-red-400/30 border-t-red-400 rounded-full animate-spin\" />\r\n                                ) : (\r\n                                    'Cancelar'\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Quick Status Change */}\r\n                    {order.status !== 'cancelled' && order.status !== 'delivered' && (\r\n                        <div className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\r\n                            <h3 className=\"text-sm font-medium text-gray-400 mb-3\">Cambio R谩pido de Estado</h3>\r\n                            <div className=\"flex flex-wrap gap-2\">\r\n                                {Object.entries(statusLabels).map(([status, label]) => (\r\n                                    <button\r\n                                        key={status}\r\n                                        onClick={() => handleStatusChange(status as OrderStatus)}\r\n                                        disabled={updating || status === order.status}\r\n                                        className={`\r\n                                            px-3 py-2 rounded-lg text-sm font-medium\r\n                                            ${status === order.status\r\n                                                ? statusColors[status as OrderStatus] + ' ring-2 ring-white/20'\r\n                                                : 'bg-white/10 text-gray-400 hover:text-white hover:bg-white/20'\r\n                                            }\r\n                                            transition-all disabled:opacity-50 disabled:cursor-not-allowed\r\n                                            flex items-center gap-1.5\r\n                                        `}\r\n                                    >\r\n                                        {statusIcons[status as OrderStatus]}\r\n                                        {label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1097, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/hooks/useTenant.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface TenantSettings {\r\n    id: string;\r\n    name: string;\r\n    slug: string;\r\n    logo_url: string | null;\r\n    cover_url: string | null;\r\n    primary_color: string | null;\r\n    secondary_color: string | null;\r\n    font_family: string | null;\r\n    currency: string;\r\n    locale: string;\r\n    tagline: string | null;\r\n    description: string | null;\r\n    address: string | null;\r\n    phone: string | null;\r\n    whatsapp: string | null;\r\n    hours: Record<string, string> | null;\r\n    social_links: {\r\n        instagram?: string;\r\n        facebook?: string;\r\n        twitter?: string;\r\n        website?: string;\r\n    } | null;\r\n    settings: {\r\n        show_prices?: boolean;\r\n        show_descriptions?: boolean;\r\n        enable_orders?: boolean;\r\n        enable_chat?: boolean;\r\n        theme?: 'light' | 'dark' | 'auto';\r\n    } | null;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\nexport interface TenantFormData {\r\n    name?: string;\r\n    slug?: string;\r\n    logo_url?: string | null;\r\n    cover_url?: string | null;\r\n    primary_color?: string | null;\r\n    secondary_color?: string | null;\r\n    font_family?: string | null;\r\n    currency?: string;\r\n    locale?: string;\r\n    tagline?: string | null;\r\n    description?: string | null;\r\n    address?: string | null;\r\n    phone?: string | null;\r\n    whatsapp?: string | null;\r\n    hours?: Record<string, string> | null;\r\n    social_links?: TenantSettings['social_links'] | null;\r\n    settings?: TenantSettings['settings'] | null;\r\n}\r\n\r\ninterface UseTenantReturn {\r\n    tenant: TenantSettings | null;\r\n    userRole: string | null;\r\n    loading: boolean;\r\n    error: string | null;\r\n    fetchTenant: () => Promise<void>;\r\n    updateTenant: (data: TenantFormData) => Promise<TenantSettings | null>;\r\n}\r\n\r\nexport function useTenant(): UseTenantReturn {\r\n    const [tenant, setTenant] = useState<TenantSettings | null>(null);\r\n    const [userRole, setUserRole] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchTenant = useCallback(async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/tenant');\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener configuraci贸n');\r\n            }\r\n            const data = await response.json();\r\n            setTenant(data.tenant);\r\n            setUserRole(data.userRole);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateTenant = useCallback(async (formData: TenantFormData): Promise<TenantSettings | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/tenant', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar configuraci贸n');\r\n            }\r\n            const data = await response.json();\r\n            const updatedTenant = data.tenant;\r\n            setTenant(updatedTenant);\r\n            return updatedTenant;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchTenant();\r\n    }, [fetchTenant]);\r\n\r\n    return {\r\n        tenant,\r\n        userRole,\r\n        loading,\r\n        error,\r\n        fetchTenant,\r\n        updateTenant,\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAmEO,SAAS;IACZ,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAwB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC5B,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAClC;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,UAAU,KAAK,MAAM;YACrB,YAAY,KAAK,QAAQ;QAC7B,EAAE,OAAO,KAAK;YACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAClD,SAAU;YACN,WAAW;QACf;IACJ,GAAG,EAAE;IAEL,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO;QACpC,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAC9C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAClC;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,gBAAgB,KAAK,MAAM;YACjC,UAAU;YACV,OAAO;QACX,EAAE,OAAO,KAAK;YACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,OAAO;QACX,SAAU;YACN,WAAW;QACf;IACJ,GAAG,EAAE;IAEL,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG;QAAC;KAAY;IAEhB,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 1172, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/ASUS/OneDrive/Documentos/Men%C3%BAs%20IA/src/app/admin/orders/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n    Search,\r\n    RefreshCw,\r\n    Eye,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Clock,\r\n    ChefHat,\r\n    Package,\r\n    CheckCircle,\r\n    AlertCircle,\r\n    Filter\r\n} from 'lucide-react';\r\nimport { useOrders, OrderStatus, statusColors, statusLabels, formatCurrency, getRelativeTime } from '@/hooks/useOrders';\r\nimport { OrderDetail } from '@/components/admin/OrderDetail';\r\nimport { useTenant } from '@/hooks/useTenant';\r\n\r\nexport default function OrdersManagementPage() {\r\n    const {\r\n        orders,\r\n        loading,\r\n        error,\r\n        stats,\r\n        pagination,\r\n        fetchOrders,\r\n        updateOrderStatus,\r\n        refreshOrders\r\n    } = useOrders();\r\n\r\n    const { tenant } = useTenant();\r\n    const currency = tenant?.currency || '$';\r\n\r\n    const [filterStatus, setFilterStatus] = useState<OrderStatus | 'all'>('all');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [selectedOrder, setSelectedOrder] = useState<string | null>(null);\r\n    const [dateFilter, setDateFilter] = useState<'today' | 'week' | 'month' | 'all'>('all');\r\n\r\n    // Apply filters\r\n    useEffect(() => {\r\n        const filters: {\r\n            status?: OrderStatus;\r\n            from?: string;\r\n            to?: string;\r\n        } = {};\r\n\r\n        if (filterStatus !== 'all') {\r\n            filters.status = filterStatus;\r\n        }\r\n\r\n        const now = new Date();\r\n        if (dateFilter === 'today') {\r\n            filters.from = new Date(now.getFullYear(), now.getMonth(), now.getDate()).toISOString();\r\n        } else if (dateFilter === 'week') {\r\n            filters.from = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 7).toISOString();\r\n        } else if (dateFilter === 'month') {\r\n            filters.from = new Date(now.getFullYear(), now.getMonth(), 1).toISOString();\r\n        }\r\n\r\n        fetchOrders(filters);\r\n    }, [filterStatus, dateFilter, fetchOrders]);\r\n\r\n    // Filter orders by search query\r\n    const filteredOrders = orders.filter(order => {\r\n        if (!searchQuery) return true;\r\n        const query = searchQuery.toLowerCase();\r\n        return (\r\n            order.order_number.toLowerCase().includes(query) ||\r\n            order.customer_name?.toLowerCase().includes(query) ||\r\n            order.table_number?.toLowerCase().includes(query)\r\n        );\r\n    });\r\n\r\n    const handleUpdateStatus = async (id: string, status: OrderStatus) => {\r\n        const result = await updateOrderStatus(id, status);\r\n        if (result) {\r\n            // Update selected order if it's the one being viewed\r\n            if (selectedOrder === id) {\r\n                // The order in the list is already updated by the hook\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    const selectedOrderData = orders.find(o => o.id === selectedOrder) || null;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Pedidos</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Gestiona los pedidos recibidos</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => refreshOrders()}\r\n                    disabled={loading}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-gray-300 transition-colors disabled:opacity-50\"\r\n                >\r\n                    <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    Actualizar\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-yellow-400\">{stats?.pending || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Pendientes</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-blue-400\">{stats?.confirmed || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Confirmados</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-orange-400\">{stats?.preparing || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Preparando</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-green-400\">{stats?.ready || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Listos</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-gray-400\">{stats?.delivered || 0}</div>\r\n                    <div className=\"text-xs text-gray-400\">Entregados</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-2xl font-bold text-white\">{formatCurrency(stats?.revenueToday || 0, currency)}</div>\r\n                    <div className=\"text-xs text-gray-400\">Ventas Hoy</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex flex-col lg:flex-row gap-4\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Buscar por orden, cliente o mesa...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"w-full pl-10 pr-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-brand-primary/50\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Date Filter */}\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setDateFilter('today')}\r\n                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${dateFilter === 'today'\r\n                                ? 'bg-brand-primary text-white'\r\n                                : 'bg-white/10 text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        Hoy\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setDateFilter('week')}\r\n                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${dateFilter === 'week'\r\n                                ? 'bg-brand-primary text-white'\r\n                                : 'bg-white/10 text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        Semana\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setDateFilter('month')}\r\n                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${dateFilter === 'month'\r\n                                ? 'bg-brand-primary text-white'\r\n                                : 'bg-white/10 text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        Mes\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setDateFilter('all')}\r\n                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${dateFilter === 'all'\r\n                                ? 'bg-brand-primary text-white'\r\n                                : 'bg-white/10 text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        Todo\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Status Filter Pills */}\r\n            <div className=\"flex flex-wrap gap-2\">\r\n                <button\r\n                    onClick={() => setFilterStatus('all')}\r\n                    className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filterStatus === 'all'\r\n                            ? 'bg-brand-primary text-white'\r\n                            : 'bg-white/10 text-gray-400 hover:text-white'\r\n                        }`}\r\n                >\r\n                    Todos\r\n                </button>\r\n                {Object.entries(statusLabels).map(([status, label]) => (\r\n                    <button\r\n                        key={status}\r\n                        onClick={() => setFilterStatus(status as OrderStatus)}\r\n                        className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filterStatus === status\r\n                                ? 'bg-brand-primary text-white'\r\n                                : 'bg-white/10 text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        {label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex items-center gap-3\">\r\n                    <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n                    <span className=\"text-red-400\">{error}</span>\r\n                </div>\r\n            )}\r\n\r\n            {/* Orders Table */}\r\n            <div className=\"bg-white/5 border border-white/10 rounded-xl overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-white/5 border-b border-white/10\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Orden #\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Cliente\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Items\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Total\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Estado\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Hora\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">\r\n                                    Acciones\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-white/5\">\r\n                            {loading ? (\r\n                                <tr>\r\n                                    <td colSpan={7} className=\"px-4 py-12 text-center\">\r\n                                        <div className=\"flex flex-col items-center gap-3\">\r\n                                            <RefreshCw className=\"w-8 h-8 text-gray-500 animate-spin\" />\r\n                                            <p className=\"text-gray-500\">Cargando pedidos...</p>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : filteredOrders.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={7} className=\"px-4 py-12 text-center text-gray-500\">\r\n                                        <div className=\"flex flex-col items-center gap-3\">\r\n                                            <Package className=\"w-12 h-12 text-gray-600\" />\r\n                                            <p>No hay pedidos</p>\r\n                                            <p className=\"text-xs\">Los pedidos aparecer谩n aqu铆 cuando los clientes realicen 贸rdenes</p>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                filteredOrders.map((order) => (\r\n                                    <tr\r\n                                        key={order.id}\r\n                                        className=\"hover:bg-white/5 transition-colors cursor-pointer\"\r\n                                        onClick={() => setSelectedOrder(order.id)}\r\n                                    >\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"text-white font-medium\">#{order.order_number}</span>\r\n                                                {order.table_number && (\r\n                                                    <span className=\"text-xs bg-white/10 px-2 py-0.5 rounded text-gray-400\">\r\n                                                        Mesa {order.table_number}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <div className=\"text-gray-200\">{order.customer_name || 'Sin nombre'}</div>\r\n                                            {order.customer_phone && (\r\n                                                <div className=\"text-xs text-gray-500\">{order.customer_phone}</div>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <div className=\"text-gray-300\">\r\n                                                {order.order_items?.length || 0} items\r\n                                            </div>\r\n                                            <div className=\"text-xs text-gray-500\">\r\n                                                {order.order_items?.slice(0, 2).map(i => i.dish_name).join(', ')}\r\n                                                {order.order_items && order.order_items.length > 2 && '...'}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <span className=\"text-white font-medium\">\r\n                                                {formatCurrency(order.total, currency)}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${statusColors[order.status]}`}>\r\n                                                {order.status === 'pending' && <Clock className=\"w-3 h-3\" />}\r\n                                                {order.status === 'confirmed' && <CheckCircle className=\"w-3 h-3\" />}\r\n                                                {order.status === 'preparing' && <ChefHat className=\"w-3 h-3\" />}\r\n                                                {order.status === 'ready' && <Package className=\"w-3 h-3\" />}\r\n                                                {statusLabels[order.status]}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <div className=\"text-gray-300 text-sm\">\r\n                                                {getRelativeTime(order.created_at)}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-4\">\r\n                                            <button\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    setSelectedOrder(order.id);\r\n                                                }}\r\n                                                className=\"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white\"\r\n                                            >\r\n                                                <Eye className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {pagination.totalPages > 1 && (\r\n                    <div className=\"flex items-center justify-between px-4 py-3 border-t border-white/10\">\r\n                        <div className=\"text-sm text-gray-500\">\r\n                            Mostrando {((pagination.page - 1) * pagination.limit) + 1} - {Math.min(pagination.page * pagination.limit, pagination.total)} de {pagination.total}\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <button\r\n                                onClick={() => fetchOrders({ page: pagination.page - 1 })}\r\n                                disabled={pagination.page === 1 || loading}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                <ChevronLeft className=\"w-4 h-4 text-gray-400\" />\r\n                            </button>\r\n                            <span className=\"px-3 py-1 text-gray-400\">\r\n                                {pagination.page} / {pagination.totalPages}\r\n                            </span>\r\n                            <button\r\n                                onClick={() => fetchOrders({ page: pagination.page + 1 })}\r\n                                disabled={pagination.page === pagination.totalPages || loading}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                <ChevronRight className=\"w-4 h-4 text-gray-400\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Order Detail Modal */}\r\n            <OrderDetail\r\n                order={selectedOrderData}\r\n                isOpen={!!selectedOrder}\r\n                onClose={() => setSelectedOrder(null)}\r\n                onUpdateStatus={handleUpdateStatus}\r\n                currency={currency}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}