module.exports = [
"[project]/src/app/favicon.ico.mjs { IMAGE => \"[project]/src/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/favicon.ico.mjs { IMAGE => \"[project]/src/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript)"));
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[project]/src/app/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/layout.tsx [app-rsc] (ecmascript)"));
}),
"[project]/src/app/(tenant)/[slug]/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/(tenant)/[slug]/layout.tsx [app-rsc] (ecmascript)"));
}),
"[project]/src/components/diner/DinerClient.tsx [app-rsc] (client reference proxy) <module evaluation>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DinerClient",
    ()=>DinerClient
]);
// This file is generated by next-core EcmascriptClientReferenceModule.
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const DinerClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call DinerClient() from the server but DinerClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/src/components/diner/DinerClient.tsx <module evaluation>", "DinerClient");
}),
"[project]/src/components/diner/DinerClient.tsx [app-rsc] (client reference proxy)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DinerClient",
    ()=>DinerClient
]);
// This file is generated by next-core EcmascriptClientReferenceModule.
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const DinerClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call DinerClient() from the server but DinerClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/src/components/diner/DinerClient.tsx", "DinerClient");
}),
"[project]/src/components/diner/DinerClient.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$diner$2f$DinerClient$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/src/components/diner/DinerClient.tsx [app-rsc] (client reference proxy) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$diner$2f$DinerClient$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__ = __turbopack_context__.i("[project]/src/components/diner/DinerClient.tsx [app-rsc] (client reference proxy)");
;
__turbopack_context__.n(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$diner$2f$DinerClient$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__);
}),
"[project]/src/app/(tenant)/[slug]/page.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>TenantPage,
    "generateStaticParams",
    ()=>generateStaticParams
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$api$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/next/dist/api/navigation.react-server.js [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/client/components/navigation.react-server.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2f$server$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/supabase/server.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$diner$2f$DinerClient$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/diner/DinerClient.tsx [app-rsc] (ecmascript)");
;
;
;
;
// Función para obtener todos los datos del tenant
async function getTenantData(slug) {
    const supabase = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$supabase$2f$server$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["createClient"])();
    // 1. Obtener el tenant por slug
    const { data: tenant, error: tenantError } = await supabase.from('tenants').select('*').eq('slug', slug).single();
    if (tenantError || !tenant) {
        return null;
    }
    // 2. Obtener categorías activas
    const { data: categories, error: categoriesError } = await supabase.from('categories').select('id, name, slug, display_order').eq('tenant_id', tenant.id).eq('is_active', true).order('display_order', {
        ascending: true
    });
    if (categoriesError) {
        console.error('Error fetching categories:', categoriesError);
    }
    // 3. Obtener platos con sus modificadores
    const { data: dishes, error: dishesError } = await supabase.from('dishes').select(`
            id,
            name,
            description,
            price,
            image_url,
            available,
            dietary,
            is_popular,
            is_chef_choice,
            is_new,
            category_id,
            dish_option_groups (
                id,
                name,
                min_selections,
                max_selections,
                display_order,
                dish_options (
                    id,
                    name,
                    price,
                    available
                )
            )
        `).eq('tenant_id', tenant.id).eq('available', true).order('name', {
        ascending: true
    });
    if (dishesError) {
        console.error('Error fetching dishes:', dishesError);
    }
    // 4. Obtener stories activas
    const now = new Date().toISOString();
    const { data: stories, error: storiesError } = await supabase.from('stories').select(`
            id,
            title,
            type,
            image_url,
            video_url,
            linked_dish_id
        `).eq('tenant_id', tenant.id).eq('is_active', true).or(`expires_at.is.null,expires_at.gt.${now}`).order('created_at', {
        ascending: false
    });
    if (storiesError) {
        console.error('Error fetching stories:', storiesError);
    }
    // 5. Construir configuración del restaurante
    const config = {
        id: tenant.id,
        slug: tenant.slug,
        name: tenant.name,
        tagline: tenant.tagline || '',
        coverImage: tenant.cover_url || '',
        logo: tenant.logo_url || undefined,
        theme: {
            colors: {
                primary: tenant.primary_color || '#f59e0b',
                secondary: tenant.secondary_color || '#1f2937',
                accent: tenant.primary_color || '#f59e0b',
                dark: '#030712'
            },
            fonts: {
                sans: tenant.font_family || 'Inter',
                serif: 'Playfair Display'
            }
        },
        currency: tenant.currency || '$'
    };
    // 6. Construir categorías
    const formattedCategories = (categories || []).map((cat)=>({
            id: cat.id,
            name: cat.name
        }));
    // 7. Construir menú
    const menu = (dishes || []).map((dish)=>{
        const category = categories?.find((c)=>c.id === dish.category_id);
        return {
            id: dish.id,
            name: dish.name,
            description: dish.description || '',
            price: dish.price,
            image: dish.image_url || '',
            category: category?.name || 'Sin categoría',
            tags: dish.dietary || [],
            popular: dish.is_popular || false,
            new: dish.is_new || false,
            chefChoice: dish.is_chef_choice || false,
            available: dish.available,
            modifiers: dish.dish_option_groups?.sort((a, b)=>a.display_order - b.display_order).map((group)=>({
                    id: group.id,
                    name: group.name,
                    minSelection: group.min_selections,
                    maxSelection: group.max_selections,
                    options: group.dish_options?.map((opt)=>({
                            id: opt.id,
                            name: opt.name,
                            price: opt.price,
                            available: opt.available
                        })) || []
                })) || []
        };
    });
    // 8. Construir stories
    const formattedStories = (stories || []).map((story)=>({
            id: story.id,
            title: story.title,
            image: story.image_url || '',
            viewed: false,
            type: story.type,
            linkedItemId: story.linked_dish_id || undefined
        }));
    return {
        config,
        menu,
        stories: formattedStories,
        categories: formattedCategories
    };
}
async function TenantPage({ params }) {
    const { slug } = await params;
    // Obtener datos reales desde Supabase
    const tenantData = await getTenantData(slug);
    if (!tenantData) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["notFound"])();
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$diner$2f$DinerClient$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DinerClient"], {
        config: tenantData.config,
        menuItems: tenantData.menu,
        stories: tenantData.stories,
        categories: tenantData.categories
    }, void 0, false, {
        fileName: "[project]/src/app/(tenant)/[slug]/page.tsx",
        lineNumber: 193,
        columnNumber: 9
    }, this);
}
function generateStaticParams() {
    // Retornar array vacío para que sea completamente dinámico
    // Si se quiere SSG, obtener slugs de la base de datos aquí
    return [];
}
}),
"[project]/src/app/(tenant)/[slug]/page.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/(tenant)/[slug]/page.tsx [app-rsc] (ecmascript)"));
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__38ff7d36._.js.map