{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/hooks/useStories.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface Story {\r\n    id: string;\r\n    tenant_id: string;\r\n    title: string;\r\n    type: 'dish' | 'promo' | 'chef' | 'event';\r\n    image_url: string | null;\r\n    video_url: string | null;\r\n    linked_dish_id: string | null;\r\n    is_active: boolean;\r\n    expires_at: string | null;\r\n    view_count: number;\r\n    display_order: number;\r\n    created_at: string;\r\n    updated_at: string;\r\n    dishes?: {\r\n        id: string;\r\n        name: string;\r\n        price: number;\r\n        image_url: string | null;\r\n    } | null;\r\n}\r\n\r\nexport interface StoryFormData {\r\n    title: string;\r\n    type: 'dish' | 'promo' | 'chef' | 'event';\r\n    image_url?: string | null;\r\n    video_url?: string | null;\r\n    linked_dish_id?: string | null;\r\n    is_active?: boolean;\r\n    expires_at?: string | null;\r\n    display_order?: number;\r\n}\r\n\r\ninterface UseStoriesReturn {\r\n    stories: Story[];\r\n    loading: boolean;\r\n    error: string | null;\r\n    fetchStories: (filters?: { type?: string; is_active?: boolean }) => Promise<void>;\r\n    createStory: (data: StoryFormData) => Promise<Story | null>;\r\n    updateStory: (id: string, data: Partial<StoryFormData>) => Promise<Story | null>;\r\n    deleteStory: (id: string) => Promise<boolean>;\r\n    getStory: (id: string) => Promise<Story | null>;\r\n    reorderStories: (storyIds: string[]) => Promise<boolean>;\r\n}\r\n\r\nexport function useStories(): UseStoriesReturn {\r\n    const [stories, setStories] = useState<Story[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchStories = useCallback(async (filters?: { type?: string; is_active?: boolean }) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (filters?.type) {\r\n                params.append('type', filters.type);\r\n            }\r\n            if (filters?.is_active !== undefined) {\r\n                params.append('is_active', String(filters.is_active));\r\n            }\r\n            const queryString = params.toString();\r\n            const url = `/api/admin/stories${queryString ? `?${queryString}` : ''}`;\r\n\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener stories');\r\n            }\r\n            const data = await response.json();\r\n            setStories(data.stories || []);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const createStory = useCallback(async (formData: StoryFormData): Promise<Story | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/stories', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al crear story');\r\n            }\r\n            const data = await response.json();\r\n            const newStory = data.story;\r\n            setStories(prev => [...prev, newStory]);\r\n            return newStory;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateStory = useCallback(async (id: string, formData: Partial<StoryFormData>): Promise<Story | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/stories/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar story');\r\n            }\r\n            const data = await response.json();\r\n            const updatedStory = data.story;\r\n            setStories(prev => prev.map(s => s.id === id ? updatedStory : s));\r\n            return updatedStory;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const deleteStory = useCallback(async (id: string): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/stories/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al eliminar story');\r\n            }\r\n            setStories(prev => prev.filter(s => s.id !== id));\r\n            return true;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const getStory = useCallback(async (id: string): Promise<Story | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/stories/${id}`);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener story');\r\n            }\r\n            const data = await response.json();\r\n            return data.story;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const reorderStories = useCallback(async (storyIds: string[]): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/stories', {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ storyIds }),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al reordenar stories');\r\n            }\r\n            // Update local state with new order\r\n            setStories(prev => {\r\n                const storyMap = new Map(prev.map(s => [s.id, s]));\r\n                return storyIds\r\n                    .map(id => storyMap.get(id))\r\n                    .filter((s): s is Story => s !== undefined);\r\n            });\r\n            return true;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchStories();\r\n    }, [fetchStories]);\r\n\r\n    return {\r\n        stories,\r\n        loading,\r\n        error,\r\n        fetchStories,\r\n        createStory,\r\n        updateStory,\r\n        deleteStory,\r\n        getStory,\r\n        reorderStories,\r\n    };\r\n}\r\n"],"names":["useState","useCallback","useEffect","Story","id","tenant_id","title","type","image_url","video_url","linked_dish_id","is_active","expires_at","view_count","display_order","created_at","updated_at","dishes","name","price","StoryFormData","UseStoriesReturn","stories","loading","error","fetchStories","filters","Promise","createStory","data","updateStory","Partial","deleteStory","getStory","reorderStories","storyIds","useStories","setStories","setLoading","setError","params","URLSearchParams","append","undefined","String","queryString","toString","url","response","fetch","ok","json","Error","err","message","formData","method","headers","body","JSON","stringify","newStory","story","prev","updatedStory","map","s","filter","storyMap","Map","get"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/hooks/useDishes.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface DishOption {\r\n    id: string;\r\n    name: string;\r\n    price: number;\r\n    available: boolean;\r\n}\r\n\r\nexport interface DishOptionGroup {\r\n    id: string;\r\n    name: string;\r\n    min_selections: number;\r\n    max_selections: number;\r\n    display_order: number;\r\n    dish_options: DishOption[];\r\n}\r\n\r\nexport interface Dish {\r\n    id: string;\r\n    tenant_id: string;\r\n    name: string;\r\n    description: string | null;\r\n    price: number;\r\n    image_url: string | null;\r\n    category_id: string | null;\r\n    available: boolean;\r\n    dietary: string[];\r\n    is_popular: boolean;\r\n    is_chef_choice: boolean;\r\n    is_new: boolean;\r\n    created_at: string;\r\n    updated_at: string;\r\n    categories?: { id: string; name: string; slug: string } | null;\r\n    dish_option_groups?: DishOptionGroup[];\r\n}\r\n\r\nexport interface DishFormData {\r\n    name: string;\r\n    description?: string | null;\r\n    price: number;\r\n    image_url?: string | null;\r\n    category_id?: string | null;\r\n    available?: boolean;\r\n    dietary?: string[];\r\n    is_popular?: boolean;\r\n    is_chef_choice?: boolean;\r\n    is_new?: boolean;\r\n}\r\n\r\ninterface UseDishesReturn {\r\n    dishes: Dish[];\r\n    loading: boolean;\r\n    error: string | null;\r\n    fetchDishes: (filters?: { category_id?: string; available?: boolean }) => Promise<void>;\r\n    createDish: (data: DishFormData) => Promise<Dish | null>;\r\n    updateDish: (id: string, data: Partial<DishFormData>) => Promise<Dish | null>;\r\n    deleteDish: (id: string) => Promise<boolean>;\r\n    getDish: (id: string) => Promise<Dish | null>;\r\n}\r\n\r\nexport function useDishes(): UseDishesReturn {\r\n    const [dishes, setDishes] = useState<Dish[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchDishes = useCallback(async (filters?: { category_id?: string; available?: boolean }) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (filters?.category_id) {\r\n                params.append('category_id', filters.category_id);\r\n            }\r\n            if (filters?.available !== undefined) {\r\n                params.append('available', String(filters.available));\r\n            }\r\n            const queryString = params.toString();\r\n            const url = `/api/admin/dishes${queryString ? `?${queryString}` : ''}`;\r\n\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener platos');\r\n            }\r\n            const data = await response.json();\r\n            setDishes(data.dishes || []);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const createDish = useCallback(async (formData: DishFormData): Promise<Dish | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch('/api/admin/dishes', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al crear plato');\r\n            }\r\n            const data = await response.json();\r\n            const newDish = data.dish;\r\n            setDishes(prev => [...prev, newDish]);\r\n            return newDish;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const updateDish = useCallback(async (id: string, formData: Partial<DishFormData>): Promise<Dish | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/dishes/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData),\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al actualizar plato');\r\n            }\r\n            const data = await response.json();\r\n            const updatedDish = data.dish;\r\n            setDishes(prev => prev.map(d => d.id === id ? updatedDish : d));\r\n            return updatedDish;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const deleteDish = useCallback(async (id: string): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/dishes/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al eliminar plato');\r\n            }\r\n            setDishes(prev => prev.filter(d => d.id !== id));\r\n            return true;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const getDish = useCallback(async (id: string): Promise<Dish | null> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`/api/admin/dishes/${id}`);\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Error al obtener plato');\r\n            }\r\n            const data = await response.json();\r\n            return data.dish;\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Error desconocido');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-fetch on mount\r\n    useEffect(() => {\r\n        fetchDishes();\r\n    }, [fetchDishes]);\r\n\r\n    return {\r\n        dishes,\r\n        loading,\r\n        error,\r\n        fetchDishes,\r\n        createDish,\r\n        updateDish,\r\n        deleteDish,\r\n        getDish,\r\n    };\r\n}\r\n"],"names":["useState","useCallback","useEffect","DishOption","id","name","price","available","DishOptionGroup","min_selections","max_selections","display_order","dish_options","Dish","tenant_id","description","image_url","category_id","dietary","is_popular","is_chef_choice","is_new","created_at","updated_at","categories","slug","dish_option_groups","DishFormData","UseDishesReturn","dishes","loading","error","fetchDishes","filters","Promise","createDish","data","updateDish","Partial","deleteDish","getDish","useDishes","setDishes","setLoading","setError","params","URLSearchParams","append","undefined","String","queryString","toString","url","response","fetch","ok","json","Error","err","message","formData","method","headers","body","JSON","stringify","newDish","dish","prev","updatedDish","map","d","filter"],"mappings":";;;;AAEA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;;AAFxD,YAAY;;AA+DL;;IACH,MAAM,CAAC2B,MAAM,EAAEa,SAAS,CAAC,OAAG1C,yKAAQ,CAACa,CAAQ,EAAE,CAAN,AAAO,EAAL,CAAC;IAC5C,MAAM,CAACiB,OAAO,EAAEa,UAAU,CAAC,OAAG3C,yKAAQ,EAAC,KAAK,CAAC;IAC7C,MAAM,CAAC+B,KAAK,EAAEa,QAAQ,CAAC,OAAG5C,yKAAQ,CAAC,CAAe,IAAI,CAAC,AAAd,GAAG,IAAI,CAAC;IAEjD,MAAMgC,WAAW,OAAG/B,4KAAW;8CAAC,OAAOgC,OAAuD,CAA/C,EAAE;YAC7CU,UAAU,CAAC,IAAI,CAAC;YAChBC,QAAQ,CAAC,IAAI,CAAC;YACd,IAAI;gBACA,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;gBACpC,IAAIb,OAAO,EAAEhB,WAAW,EAAE;oBACtB4B,MAAM,CAACE,MAAM,CAAC,aAAa,EAAEd,OAAO,CAAChB,WAAW,CAAC;gBACrD;gBACA,IAAIgB,OAAO,EAAE1B,SAAS,KAAKyC,SAAS,EAAE;oBAClCH,MAAM,CAACE,MAAM,CAAC,WAAW,EAAEE,MAAM,CAAChB,OAAO,CAAC1B,SAAS,CAAC,CAAC;gBACzD;gBACA,MAAM2C,WAAW,GAAGL,MAAM,CAACM,QAAQ,CAAC,CAAC;gBACrC,MAAMC,GAAG,GAAG,CAAA,iBAAA,EAAoBF,WAAW,GAAG,CAAA,CAAA,EAAIA,WAAW,EAAE,GAAG,EAAE,EAAE;gBAEtE,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;gBACjC,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;oBACd,MAAMnB,IAAI,GAAG,MAAMiB,QAAQ,CAACG,IAAI,CAAC,CAAC;oBAClC,MAAM,IAAIC,KAAK,CAACrB,IAAI,CAACL,KAAK,IAAI,yBAAyB,CAAC;gBAC5D;gBACA,MAAMK,MAAI,GAAG,MAAMiB,QAAQ,CAACG,IAAI,CAAC,CAAC;gBAClCd,SAAS,CAACN,MAAI,CAACP,MAAM,IAAI,EAAE,CAAC;YAChC,CAAC,CAAC,OAAO6B,GAAG,EAAE;gBACVd,QAAQ,CAACc,GAAG,YAAYD,KAAK,GAAGC,GAAG,CAACC,OAAO,GAAG,mBAAmB,CAAC;YACtE,CAAC,QAAS;gBACNhB,UAAU,CAAC,KAAK,CAAC;YACrB;QACJ,CAAC;6CAAE,EAAE,CAAC;IAEN,MAAMR,UAAU,OAAGlC,4KAAW;6CAAC,OAAO2D,QAAQ,EAAEjC,YAAY,CAAC,EAAEO,OAAO,CAACrB,IAAI,GAAG,IAAI,CAAC,IAAI;YACnF8B,UAAU,CAAC,IAAI,CAAC;YAChBC,QAAQ,CAAC,IAAI,CAAC;YACd,IAAI;gBACA,MAAMS,UAAQ,GAAG,MAAMC,KAAK,CAAC,mBAAmB,EAAE;oBAC9CO,MAAM,EAAE,MAAM;oBACdC,OAAO,EAAE;wBAAE,cAAc,EAAE;oBAAmB,CAAC;oBAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ;gBACjC,CAAC,CAAC;gBACF,IAAI,CAACP,UAAQ,CAACE,EAAE,EAAE;oBACd,MAAMnB,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;oBAClC,MAAM,IAAIC,KAAK,CAACrB,MAAI,CAACL,KAAK,IAAI,sBAAsB,CAAC;gBACzD;gBACA,MAAMK,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;gBAClC,MAAMU,OAAO,GAAG9B,MAAI,CAAC+B,IAAI;gBACzBzB,SAAS;0DAAC0B,IAAI,GAAI,CAAC;+BAAGA,IAAI;4BAAEF,OAAO;yBAAC,CAAC;;gBACrC,OAAOA,OAAO;YAClB,CAAC,CAAC,OAAOR,KAAG,EAAE;gBACVd,QAAQ,CAACc,KAAG,YAAYD,KAAK,GAAGC,KAAG,CAACC,OAAO,GAAG,mBAAmB,CAAC;gBAClE,OAAO,IAAI;YACf,CAAC,QAAS;gBACNhB,UAAU,CAAC,KAAK,CAAC;YACrB;QACJ,CAAC;4CAAE,EAAE,CAAC;IAEN,MAAMN,UAAU,OAAGpC,4KAAW;6CAAC,OAAOG,EAAE,EAAE,AAAQwD,MAAF,IAAU,EAAEtB,OAAO,CAACX,YAAY,CAAC,CAAC,EAAEO,OAAO,CAACrB,IAAI,GAAG,IAAI,CAAC,IAAI;YACxG8B,UAAU,CAAC,IAAI,CAAC;YAChBC,QAAQ,CAAC,IAAI,CAAC;YACd,IAAI;gBACA,MAAMS,UAAQ,GAAG,MAAMC,KAAK,CAAC,CAAA,kBAAA,EAAqBlD,EAAE,EAAE,EAAE;oBACpDyD,MAAM,EAAE,KAAK;oBACbC,OAAO,EAAE;wBAAE,cAAc,EAAE;oBAAmB,CAAC;oBAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,UAAQ;gBACjC,CAAC,CAAC;gBACF,IAAI,CAACP,UAAQ,CAACE,EAAE,EAAE;oBACd,MAAMnB,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;oBAClC,MAAM,IAAIC,KAAK,CAACrB,MAAI,CAACL,KAAK,IAAI,2BAA2B,CAAC;gBAC9D;gBACA,MAAMK,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;gBAClC,MAAMa,WAAW,GAAGjC,MAAI,CAAC+B,IAAI;gBAC7BzB,SAAS;0DAAC0B,MAAI,GAAIA,MAAI,CAACE,GAAG;iEAACC,CAAC,IAAIA,CAAC,CAACnE,EAAE,KAAKA,EAAE,GAAGiE,WAAW,GAAGE,CAAC,CAAC,CAAC;;;gBAC/D,OAAOF,WAAW;YACtB,CAAC,CAAC,OAAOX,KAAG,EAAE;gBACVd,QAAQ,CAACc,KAAG,YAAYD,KAAK,GAAGC,KAAG,CAACC,OAAO,GAAG,mBAAmB,CAAC;gBAClE,OAAO,IAAI;YACf,CAAC,QAAS;gBACNhB,UAAU,CAAC,KAAK,CAAC;YACrB;QACJ,CAAC;4CAAE,EAAE,CAAC;IAEN,MAAMJ,UAAU,OAAGtC,4KAAW;6CAAC,OAAOG,IAAE,EAAE,MAAM,CAAC,EAAE8B,OAAO,CAAC,OAAO,CAAC,IAAI;YACnES,UAAU,CAAC,IAAI,CAAC;YAChBC,QAAQ,CAAC,IAAI,CAAC;YACd,IAAI;gBACA,MAAMS,UAAQ,GAAG,MAAMC,KAAK,CAAC,CAAA,kBAAA,EAAqBlD,IAAE,EAAE,EAAE;oBACpDyD,MAAM,EAAE;gBACZ,CAAC,CAAC;gBACF,IAAI,CAACR,UAAQ,CAACE,EAAE,EAAE;oBACd,MAAMnB,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;oBAClC,MAAM,IAAIC,KAAK,CAACrB,MAAI,CAACL,KAAK,IAAI,yBAAyB,CAAC;gBAC5D;gBACAW,SAAS;0DAAC0B,MAAI,GAAIA,MAAI,CAACI,MAAM;kEAACD,GAAC,GAAIA,GAAC,CAACnE,EAAE,KAAKA,IAAE,CAAC,CAAC;;;gBAChD,OAAO,IAAI;YACf,CAAC,CAAC,OAAOsD,KAAG,EAAE;gBACVd,QAAQ,CAACc,KAAG,YAAYD,KAAK,GAAGC,KAAG,CAACC,OAAO,GAAG,mBAAmB,CAAC;gBAClE,OAAO,KAAK;YAChB,CAAC,QAAS;gBACNhB,UAAU,CAAC,KAAK,CAAC;YACrB;QACJ,CAAC;4CAAE,EAAE,CAAC;IAEN,MAAMH,OAAO,OAAGvC,4KAAW;0CAAC,OAAOG,IAAE,EAAE,MAAM,CAAC,EAAE8B,OAAO,CAACrB,IAAI,GAAG,IAAI,CAAC,IAAI;YACpE8B,UAAU,CAAC,IAAI,CAAC;YAChBC,QAAQ,CAAC,IAAI,CAAC;YACd,IAAI;gBACA,MAAMS,UAAQ,GAAG,MAAMC,KAAK,CAAC,CAAA,kBAAA,EAAqBlD,IAAE,EAAE,CAAC;gBACvD,IAAI,CAACiD,UAAQ,CAACE,EAAE,EAAE;oBACd,MAAMnB,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;oBAClC,MAAM,IAAIC,KAAK,CAACrB,MAAI,CAACL,KAAK,IAAI,wBAAwB,CAAC;gBAC3D;gBACA,MAAMK,MAAI,GAAG,MAAMiB,UAAQ,CAACG,IAAI,CAAC,CAAC;gBAClC,OAAOpB,MAAI,CAAC+B,IAAI;YACpB,CAAC,CAAC,OAAOT,KAAG,EAAE;gBACVd,QAAQ,CAACc,KAAG,YAAYD,KAAK,GAAGC,KAAG,CAACC,OAAO,GAAG,mBAAmB,CAAC;gBAClE,OAAO,IAAI;YACf,CAAC,QAAS;gBACNhB,UAAU,CAAC,KAAK,CAAC;YACrB;QACJ,CAAC;yCAAE,EAAE,CAAC;IAEN,sBAAA;QACAzC,0KAAS;+BAAC,MAAM;YACZ8B,WAAW,CAAC,CAAC;QACjB,CAAC;8BAAE;QAACA,WAAW;KAAC,CAAC;IAEjB,OAAO;QACHH,MAAM;QACNC,OAAO;QACPC,KAAK;QACLC,WAAW;QACXG,UAAU;QACVE,UAAU;QACVE,UAAU;QACVC;IACJ,CAAC;AACL;GA1IgBC,SAASA,CAAA,CAAE,EAAEb,eAAe,CAAC","ignoreList":[]}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/components/ui/Modal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef } from 'react';\nimport { X } from 'lucide-react';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n  title?: string;\n  variant?: 'default' | 'immersive';\n}\n\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, children, title, variant = 'default' }) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleOutsideClick = (event: MouseEvent) => {\n      if (modalRef.current && !modalRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleOutsideClick);\n      document.body.style.overflow = 'hidden';\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleOutsideClick);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  const isImmersive = variant === 'immersive';\n\n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-end md:items-center justify-center bg-black/80 backdrop-blur-sm p-0 md:p-6 animate-fade-in\">\n      <div\n        ref={modalRef}\n        className={`\n            bg-gray-900/90 backdrop-blur-xl border border-white/10 rounded-t-[2.5rem] md:rounded-[2.5rem] w-full max-w-2xl overflow-hidden shadow-2xl transform transition-all animate-slide-up h-[90vh] md:h-auto md:max-h-[90vh] flex flex-col\n            ${isImmersive ? 'p-0' : 'p-0 md:p-6'} \n        `}\n      >\n        {/* Header */}\n        <div className={`\n            flex justify-between items-center absolute top-0 left-0 right-0 z-20 pointer-events-none\n            ${isImmersive ? 'p-6 bg-gradient-to-b from-black/60 to-transparent' : 'p-6 bg-transparent'}\n        `}>\n          <h3 className=\"text-lg font-serif italic text-white/90 drop-shadow-md\">{title}</h3>\n\n          <button onClick={onClose} className=\"pointer-events-auto p-2.5 bg-black/40 backdrop-blur-md rounded-full border border-white/10 hover:bg-white hover:text-black transition-all text-white shadow-lg group\">\n            <X size={20} className=\"group-hover:rotate-90 transition-transform duration-300\" />\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto overscroll-contain no-scrollbar\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["c","_c","React","useEffect","useRef","X","ModalProps","isOpen","onClose","children","ReactNode","title","variant","Modal","FC","t0","$","$i","Symbol","for","t1","undefined","modalRef","t2","t3","handleOutsideClick","event","current","contains","target","Node","document","addEventListener","body","style","overflow","removeEventListener","isImmersive","t4","t5","t6","t7","t8","t9","t10","t11"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/components/admin/StoryForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Upload, Loader2, Image, Video, Calendar, Link2 } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport type { Story, StoryFormData } from '@/hooks/useStories';\r\nimport type { Dish } from '@/hooks/useDishes';\r\n\r\ninterface StoryFormProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSubmit: (data: StoryFormData) => Promise<boolean>;\r\n    story?: Story | null;\r\n    dishes: Dish[];\r\n    loading?: boolean;\r\n}\r\n\r\nconst STORY_TYPES = [\r\n    { value: 'dish', label: 'Plato', description: 'Mostrar un plato del menú' },\r\n    { value: 'promo', label: 'Promoción', description: 'Ofertas y descuentos especiales' },\r\n    { value: 'chef', label: 'Chef', description: 'Destacados del chef' },\r\n    { value: 'event', label: 'Evento', description: 'Eventos especiales' },\r\n];\r\n\r\nexport const StoryForm: React.FC<StoryFormProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onSubmit,\r\n    story,\r\n    dishes,\r\n    loading = false,\r\n}) => {\r\n    const [formData, setFormData] = useState<StoryFormData>({\r\n        title: '',\r\n        type: 'dish',\r\n        image_url: null,\r\n        video_url: null,\r\n        linked_dish_id: null,\r\n        is_active: true,\r\n        expires_at: null,\r\n    });\r\n    const [uploading, setUploading] = useState(false);\r\n    const [uploadType, setUploadType] = useState<'image' | 'video'>('image');\r\n    const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n    // Populate form when editing\r\n    useEffect(() => {\r\n        if (story) {\r\n            setFormData({\r\n                title: story.title,\r\n                type: story.type,\r\n                image_url: story.image_url,\r\n                video_url: story.video_url,\r\n                linked_dish_id: story.linked_dish_id,\r\n                is_active: story.is_active,\r\n                expires_at: story.expires_at ? story.expires_at.split('T')[0] : null,\r\n            });\r\n            setUploadType(story.video_url ? 'video' : 'image');\r\n        } else {\r\n            setFormData({\r\n                title: '',\r\n                type: 'dish',\r\n                image_url: null,\r\n                video_url: null,\r\n                linked_dish_id: null,\r\n                is_active: true,\r\n                expires_at: null,\r\n            });\r\n            setUploadType('image');\r\n        }\r\n        setErrors({});\r\n    }, [story, isOpen]);\r\n\r\n    const handleMediaUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Determine folder based on file type\r\n        const isVideo = file.type.startsWith('video/');\r\n        const folder = isVideo ? 'menuos/stories/videos' : 'menuos/stories/images';\r\n\r\n        setUploading(true);\r\n        try {\r\n            const uploadFormData = new FormData();\r\n            uploadFormData.append('file', file);\r\n            uploadFormData.append('folder', folder);\r\n\r\n            // For videos, we might want to set different upload options\r\n            if (isVideo) {\r\n                uploadFormData.append('resource_type', 'video');\r\n            }\r\n\r\n            const response = await fetch('/api/upload', {\r\n                method: 'POST',\r\n                body: uploadFormData,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Error al subir archivo');\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            if (isVideo) {\r\n                setFormData(prev => ({\r\n                    ...prev,\r\n                    video_url: data.data.secure_url,\r\n                    image_url: null, // Clear image if video is uploaded\r\n                }));\r\n                setUploadType('video');\r\n            } else {\r\n                setFormData(prev => ({\r\n                    ...prev,\r\n                    image_url: data.data.secure_url,\r\n                    video_url: null, // Clear video if image is uploaded\r\n                }));\r\n                setUploadType('image');\r\n            }\r\n        } catch (error) {\r\n            console.error('Upload error:', error);\r\n            alert('Error al subir el archivo');\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    const validate = (): boolean => {\r\n        const newErrors: Record<string, string> = {};\r\n        if (!formData.title.trim()) {\r\n            newErrors.title = 'El título es requerido';\r\n        }\r\n        if (!formData.image_url && !formData.video_url) {\r\n            newErrors.media = 'Debes subir una imagen o video';\r\n        }\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!validate()) return;\r\n\r\n        const success = await onSubmit(formData);\r\n        if (success) {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const getMediaPreview = () => {\r\n        if (formData.video_url) {\r\n            return (\r\n                <div className=\"relative w-full aspect-[9/16] rounded-lg overflow-hidden border border-white/10 bg-black\">\r\n                    <video\r\n                        src={formData.video_url}\r\n                        className=\"w-full h-full object-cover\"\r\n                        muted\r\n                        playsInline\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setFormData(prev => ({ ...prev, video_url: null }))}\r\n                        className=\"absolute top-2 right-2 p-1.5 bg-red-500 rounded-full hover:bg-red-600 transition-colors\"\r\n                    >\r\n                        <X size={12} className=\"text-white\" />\r\n                    </button>\r\n                    <div className=\"absolute bottom-2 left-2 px-2 py-1 bg-black/50 rounded text-xs text-white flex items-center gap-1\">\r\n                        <Video size={12} />\r\n                        Video\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (formData.image_url) {\r\n            return (\r\n                <div className=\"relative w-full aspect-[9/16] rounded-lg overflow-hidden border border-white/10\">\r\n                    <img\r\n                        src={formData.image_url}\r\n                        alt=\"Preview\"\r\n                        className=\"w-full h-full object-cover\"\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setFormData(prev => ({ ...prev, image_url: null }))}\r\n                        className=\"absolute top-2 right-2 p-1.5 bg-red-500 rounded-full hover:bg-red-600 transition-colors\"\r\n                    >\r\n                        <X size={12} className=\"text-white\" />\r\n                    </button>\r\n                    <div className=\"absolute bottom-2 left-2 px-2 py-1 bg-black/50 rounded text-xs text-white flex items-center gap-1\">\r\n                        <Image size={12} />\r\n                        Imagen\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title={story ? 'Editar Story' : 'Nueva Story'}>\r\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6 max-h-[80vh] overflow-y-auto\">\r\n                {/* Media Upload */}\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                        Media (Imagen o Video) *\r\n                    </label>\r\n\r\n                    {!formData.image_url && !formData.video_url ? (\r\n                        <div className=\"space-y-3\">\r\n                            {/* Upload buttons */}\r\n                            <div className=\"flex gap-3\">\r\n                                <label className={`flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${uploadType === 'image'\r\n                                        ? 'border-brand-primary bg-brand-primary/10'\r\n                                        : 'border-white/20 hover:border-white/40'\r\n                                    }`}>\r\n                                    {uploading && uploadType === 'image' ? (\r\n                                        <Loader2 size={32} className=\"text-gray-400 animate-spin\" />\r\n                                    ) : (\r\n                                        <>\r\n                                            <Image size={32} className=\"text-gray-400\" />\r\n                                            <span className=\"text-sm text-gray-400 mt-2\">Subir Imagen</span>\r\n                                            <span className=\"text-xs text-gray-500 mt-1\">9:16 recomendado</span>\r\n                                        </>\r\n                                    )}\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/*\"\r\n                                        onChange={(e) => {\r\n                                            setUploadType('image');\r\n                                            handleMediaUpload(e);\r\n                                        }}\r\n                                        className=\"hidden\"\r\n                                        disabled={uploading}\r\n                                    />\r\n                                </label>\r\n\r\n                                <label className={`flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${uploadType === 'video'\r\n                                        ? 'border-brand-primary bg-brand-primary/10'\r\n                                        : 'border-white/20 hover:border-white/40'\r\n                                    }`}>\r\n                                    {uploading && uploadType === 'video' ? (\r\n                                        <Loader2 size={32} className=\"text-gray-400 animate-spin\" />\r\n                                    ) : (\r\n                                        <>\r\n                                            <Video size={32} className=\"text-gray-400\" />\r\n                                            <span className=\"text-sm text-gray-400 mt-2\">Subir Video</span>\r\n                                            <span className=\"text-xs text-gray-500 mt-1\">Máx. 30 segundos</span>\r\n                                        </>\r\n                                    )}\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"video/*\"\r\n                                        onChange={(e) => {\r\n                                            setUploadType('video');\r\n                                            handleMediaUpload(e);\r\n                                        }}\r\n                                        className=\"hidden\"\r\n                                        disabled={uploading}\r\n                                    />\r\n                                </label>\r\n                            </div>\r\n\r\n                            <p className=\"text-gray-500 text-xs text-center\">\r\n                                Formatos: JPG, PNG, WebP, MP4, WebM. Máximo 50MB para videos.\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex gap-4\">\r\n                            <div className=\"w-32 flex-shrink-0\">\r\n                                {getMediaPreview()}\r\n                            </div>\r\n                            <div className=\"flex-1 space-y-3\">\r\n                                <p className=\"text-gray-400 text-sm\">\r\n                                    {formData.video_url\r\n                                        ? 'Video cargado correctamente. Se reproducirá en bucle.'\r\n                                        : 'Imagen cargada correctamente.'}\r\n                                </p>\r\n                                <label className=\"inline-flex items-center gap-2 px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg cursor-pointer transition-colors text-sm text-gray-300\">\r\n                                    <Upload size={16} />\r\n                                    Cambiar media\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept={formData.video_url ? 'video/*' : 'image/*'}\r\n                                        onChange={handleMediaUpload}\r\n                                        className=\"hidden\"\r\n                                        disabled={uploading}\r\n                                    />\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {errors.media && (\r\n                        <p className=\"text-red-400 text-xs mt-2\">{errors.media}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                        Título *\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={formData.title}\r\n                        onChange={(e) => {\r\n                            setFormData(prev => ({ ...prev, title: e.target.value }));\r\n                            if (errors.title) setErrors(prev => ({ ...prev, title: '' }));\r\n                        }}\r\n                        className={`w-full px-4 py-3 bg-white/5 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-primary/50 transition-colors ${errors.title ? 'border-red-500' : 'border-white/10'\r\n                            }`}\r\n                        placeholder=\"Ej: Especial del Día\"\r\n                    />\r\n                    {errors.title && (\r\n                        <p className=\"text-red-400 text-xs mt-1\">{errors.title}</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Type */}\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                        Tipo de Story\r\n                    </label>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        {STORY_TYPES.map((type) => (\r\n                            <button\r\n                                key={type.value}\r\n                                type=\"button\"\r\n                                onClick={() => setFormData(prev => ({ ...prev, type: type.value as StoryFormData['type'] }))}\r\n                                className={`p-3 rounded-lg border text-left transition-colors ${formData.type === type.value\r\n                                        ? 'border-brand-primary bg-brand-primary/10'\r\n                                        : 'border-white/10 hover:border-white/20'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"text-sm font-medium text-white\">{type.label}</div>\r\n                                <div className=\"text-xs text-gray-500\">{type.description}</div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Linked Dish */}\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                        <Link2 size={14} className=\"inline mr-1\" />\r\n                        Plato Vinculado (Opcional)\r\n                    </label>\r\n                    <select\r\n                        value={formData.linked_dish_id || ''}\r\n                        onChange={(e) => setFormData(prev => ({\r\n                            ...prev,\r\n                            linked_dish_id: e.target.value || null\r\n                        }))}\r\n                        className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-brand-primary/50 transition-colors\"\r\n                    >\r\n                        <option value=\"\">Ninguno</option>\r\n                        {dishes.map((dish) => (\r\n                            <option key={dish.id} value={dish.id}>\r\n                                {dish.name} - ${dish.price.toLocaleString('es-CO')}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    <p className=\"text-gray-500 text-xs mt-1\">\r\n                        Al vincular un plato, los usuarios podrán verlo al tocar la story\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Expiration Date */}\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                        <Calendar size={14} className=\"inline mr-1\" />\r\n                        Fecha de Expiración (Opcional)\r\n                    </label>\r\n                    <input\r\n                        type=\"date\"\r\n                        value={formData.expires_at || ''}\r\n                        onChange={(e) => setFormData(prev => ({\r\n                            ...prev,\r\n                            expires_at: e.target.value || null\r\n                        }))}\r\n                        min={new Date().toISOString().split('T')[0]}\r\n                        className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-brand-primary/50 transition-colors\"\r\n                    />\r\n                    <p className=\"text-gray-500 text-xs mt-1\">\r\n                        La story se desactivará automáticamente después de esta fecha\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Active Status */}\r\n                <div className=\"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10\">\r\n                    <div>\r\n                        <div className=\"text-sm font-medium text-white\">Story Activa</div>\r\n                        <div className=\"text-xs text-gray-500\">La story será visible en el menú</div>\r\n                    </div>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setFormData(prev => ({ ...prev, is_active: !prev.is_active }))}\r\n                        className={`relative w-12 h-6 rounded-full transition-colors ${formData.is_active ? 'bg-brand-primary' : 'bg-gray-600'\r\n                            }`}\r\n                    >\r\n                        <span\r\n                            className={`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${formData.is_active ? 'translate-x-6' : 'translate-x-0'\r\n                                }`}\r\n                        />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-4 border-t border-white/10\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors font-medium\"\r\n                    >\r\n                        Cancelar\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading || uploading}\r\n                        className=\"flex-1 px-4 py-3 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                    >\r\n                        {loading ? (\r\n                            <>\r\n                                <Loader2 size={16} className=\"animate-spin\" />\r\n                                Guardando...\r\n                            </>\r\n                        ) : (\r\n                            story ? 'Guardar Cambios' : 'Crear Story'\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </Modal>\r\n    );\r\n};\r\n"],"names":["React","useState","useEffect","X","Upload","Loader2","Image","Video","Calendar","Link2","Modal","Story","StoryFormData","Dish","StoryFormProps","isOpen","onClose","onSubmit","data","Promise","story","dishes","loading","STORY_TYPES","value","label","description","StoryForm","FC","formData","setFormData","title","type","image_url","video_url","linked_dish_id","is_active","expires_at","uploading","setUploading","uploadType","setUploadType","errors","setErrors","Record","split","handleMediaUpload","e","ChangeEvent","HTMLInputElement","file","target","files","isVideo","startsWith","folder","uploadFormData","FormData","append","response","fetch","method","body","ok","Error","json","prev","secure_url","error","console","alert","validate","newErrors","trim","media","Object","keys","length","handleSubmit","FormEvent","preventDefault","success","getMediaPreview","map","dish","id","name","price","toLocaleString","Date","toISOString"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1430, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/components/ui/ConfirmDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { AlertTriangle, X } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\n\r\ninterface ConfirmDialogProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n    title: string;\r\n    message: string;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n    variant?: 'danger' | 'warning' | 'info';\r\n    loading?: boolean;\r\n}\r\n\r\nexport const ConfirmDialog: React.FC<ConfirmDialogProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n    title,\r\n    message,\r\n    confirmText = 'Confirmar',\r\n    cancelText = 'Cancelar',\r\n    variant = 'danger',\r\n    loading = false,\r\n}) => {\r\n    const variantStyles = {\r\n        danger: {\r\n            icon: 'bg-red-500/20 text-red-400',\r\n            button: 'bg-red-500 hover:bg-red-600',\r\n        },\r\n        warning: {\r\n            icon: 'bg-yellow-500/20 text-yellow-400',\r\n            button: 'bg-yellow-500 hover:bg-yellow-600',\r\n        },\r\n        info: {\r\n            icon: 'bg-blue-500/20 text-blue-400',\r\n            button: 'bg-blue-500 hover:bg-blue-600',\r\n        },\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"\">\r\n            <div className=\"p-6\">\r\n                <div className=\"flex items-start gap-4\">\r\n                    <div className={`p-3 rounded-full ${variantStyles[variant].icon}`}>\r\n                        <AlertTriangle size={24} />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                        <h3 className=\"text-lg font-semibold text-white mb-2\">\r\n                            {title}\r\n                        </h3>\r\n                        <p className=\"text-gray-400 text-sm\">\r\n                            {message}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mt-6\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        disabled={loading}\r\n                        className=\"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors font-medium disabled:opacity-50\"\r\n                    >\r\n                        {cancelText}\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onConfirm}\r\n                        disabled={loading}\r\n                        className={`flex-1 px-4 py-3 ${variantStyles[variant].button} text-white rounded-lg transition-colors font-medium disabled:opacity-50 flex items-center justify-center gap-2`}\r\n                    >\r\n                        {loading ? (\r\n                            <>\r\n                                <span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                Eliminando...\r\n                            </>\r\n                        ) : (\r\n                            confirmText\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n"],"names":["c","_c","React","AlertTriangle","X","Modal","ConfirmDialogProps","isOpen","onClose","onConfirm","title","message","confirmText","cancelText","variant","loading","ConfirmDialog","FC","t0","$","$i","Symbol","for","t1","t2","t3","t4","undefined","t5","danger","icon","button","warning","info","variantStyles","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1705, "column": 0}, "map": {"version":3,"sources":["c:/Users/ASUS/OneDrive/Documentos/Menús IA/src/app/admin/stories/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { Plus, Eye, Edit2, Trash2, Image, Video, Calendar, Loader2, AlertCircle } from 'lucide-react';\r\nimport { useStories, type Story, type StoryFormData } from '@/hooks/useStories';\r\nimport { useDishes } from '@/hooks/useDishes';\r\nimport { StoryForm } from '@/components/admin/StoryForm';\r\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\r\n\r\nconst STORY_TYPE_LABELS: Record<string, string> = {\r\n    dish: 'Plato',\r\n    promo: 'Promoción',\r\n    chef: 'Chef',\r\n    event: 'Evento',\r\n};\r\n\r\nconst STORY_TYPE_COLORS: Record<string, string> = {\r\n    dish: 'bg-green-500/20 text-green-400 border-green-500/30',\r\n    promo: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',\r\n    chef: 'bg-purple-500/20 text-purple-400 border-purple-500/30',\r\n    event: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n};\r\n\r\nexport default function StoriesManagementPage() {\r\n    const { stories, loading, error, fetchStories, createStory, updateStory, deleteStory } = useStories();\r\n    const { dishes } = useDishes();\r\n\r\n    const [isFormOpen, setIsFormOpen] = useState(false);\r\n    const [editingStory, setEditingStory] = useState<Story | null>(null);\r\n    const [deleteConfirm, setDeleteConfirm] = useState<Story | null>(null);\r\n    const [filterType, setFilterType] = useState<string>('all');\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    // Filter stories by type\r\n    const filteredStories = useMemo(() => {\r\n        if (filterType === 'all') return stories;\r\n        return stories.filter(s => s.type === filterType);\r\n    }, [stories, filterType]);\r\n\r\n    // Calculate stats\r\n    const stats = useMemo(() => {\r\n        const activeStories = stories.filter(s => s.is_active);\r\n        const totalViews = stories.reduce((sum, s) => sum + (s.view_count || 0), 0);\r\n        const expiredStories = stories.filter(s =>\r\n            s.expires_at && new Date(s.expires_at) < new Date()\r\n        );\r\n\r\n        return {\r\n            total: stories.length,\r\n            active: activeStories.length,\r\n            views: totalViews,\r\n            expired: expiredStories.length,\r\n        };\r\n    }, [stories]);\r\n\r\n    const handleCreate = () => {\r\n        setEditingStory(null);\r\n        setIsFormOpen(true);\r\n    };\r\n\r\n    const handleEdit = (story: Story) => {\r\n        setEditingStory(story);\r\n        setIsFormOpen(true);\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!deleteConfirm) return;\r\n\r\n        setSubmitting(true);\r\n        const success = await deleteStory(deleteConfirm.id);\r\n        if (success) {\r\n            setDeleteConfirm(null);\r\n        }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    const handleSubmit = async (data: StoryFormData): Promise<boolean> => {\r\n        setSubmitting(true);\r\n        try {\r\n            let success: Story | null;\r\n            if (editingStory) {\r\n                success = await updateStory(editingStory.id, data);\r\n            } else {\r\n                success = await createStory(data);\r\n            }\r\n            return success !== null;\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString('es-CO', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            year: 'numeric',\r\n        });\r\n    };\r\n\r\n    const isExpired = (story: Story) => {\r\n        return story.expires_at && new Date(story.expires_at) < new Date();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Stories</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Gestiona tus stories promocionales tipo Instagram</p>\r\n                </div>\r\n                <button\r\n                    onClick={handleCreate}\r\n                    className=\"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors text-sm font-medium flex items-center gap-2\"\r\n                >\r\n                    <Plus size={18} />\r\n                    Nueva Story\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-3xl font-bold text-white\">{stats.total}</div>\r\n                    <div className=\"text-sm text-gray-400\">Total Stories</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-3xl font-bold text-green-400\">{stats.active}</div>\r\n                    <div className=\"text-sm text-gray-400\">Activas</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-3xl font-bold text-white\">{stats.views.toLocaleString('es-CO')}</div>\r\n                    <div className=\"text-sm text-gray-400\">Visualizaciones</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                    <div className=\"text-3xl font-bold text-red-400\">{stats.expired}</div>\r\n                    <div className=\"text-sm text-gray-400\">Expiradas</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex items-center gap-3\">\r\n                    <AlertCircle className=\"text-red-400\" size={20} />\r\n                    <p className=\"text-red-400 text-sm\">{error}</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Stories Grid */}\r\n            <div className=\"bg-white/5 border border-white/10 rounded-xl p-6\">\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\r\n                    <h2 className=\"text-lg font-semibold text-white\">Todas las Stories</h2>\r\n                    <select\r\n                        value={filterType}\r\n                        onChange={(e) => setFilterType(e.target.value)}\r\n                        className=\"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-brand-primary\"\r\n                    >\r\n                        <option value=\"all\">Todos los tipos</option>\r\n                        <option value=\"dish\">Plato</option>\r\n                        <option value=\"promo\">Promoción</option>\r\n                        <option value=\"chef\">Chef</option>\r\n                        <option value=\"event\">Evento</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className=\"flex items-center justify-center py-12\">\r\n                        <Loader2 size={32} className=\"text-gray-400 animate-spin\" />\r\n                    </div>\r\n                ) : filteredStories.length === 0 ? (\r\n                    <div className=\"text-center py-12\">\r\n                        <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-white/5 flex items-center justify-center\">\r\n                            <Image size={32} className=\"text-gray-500\" />\r\n                        </div>\r\n                        <p className=\"text-gray-400\">No hay stories creados</p>\r\n                        <p className=\"text-gray-500 text-sm mt-2\">\r\n                            {filterType === 'all'\r\n                                ? 'Crea tu primera story para promocionar platos'\r\n                                : 'No hay stories de este tipo'}\r\n                        </p>\r\n                        {filterType === 'all' && (\r\n                            <button\r\n                                onClick={handleCreate}\r\n                                className=\"mt-4 px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                            >\r\n                                Crear Story\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4\">\r\n                        {filteredStories.map((story) => (\r\n                            <div\r\n                                key={story.id}\r\n                                className={`group relative aspect-[9/16] bg-white/5 rounded-xl overflow-hidden border transition-all ${isExpired(story)\r\n                                        ? 'border-red-500/30 opacity-60'\r\n                                        : story.is_active\r\n                                            ? 'border-white/10 hover:border-brand-primary/50'\r\n                                            : 'border-gray-500/30 opacity-50'\r\n                                    }`}\r\n                            >\r\n                                {/* Media Preview */}\r\n                                {story.video_url ? (\r\n                                    <video\r\n                                        src={story.video_url}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                        muted\r\n                                        playsInline\r\n                                        onMouseEnter={(e) => e.currentTarget.play()}\r\n                                        onMouseLeave={(e) => {\r\n                                            e.currentTarget.pause();\r\n                                            e.currentTarget.currentTime = 0;\r\n                                        }}\r\n                                    />\r\n                                ) : story.image_url ? (\r\n                                    <img\r\n                                        src={story.image_url}\r\n                                        alt={story.title}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                    />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full flex items-center justify-center bg-white/10\">\r\n                                        <Image size={32} className=\"text-gray-500\" />\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Overlay */}\r\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <div className=\"absolute bottom-0 left-0 right-0 p-3\">\r\n                                        <p className=\"text-white text-sm font-medium truncate\">{story.title}</p>\r\n                                        <div className=\"flex items-center gap-2 mt-1\">\r\n                                            <span className={`text-xs px-2 py-0.5 rounded border ${STORY_TYPE_COLORS[story.type]}`}>\r\n                                                {STORY_TYPE_LABELS[story.type]}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Status Indicators */}\r\n                                <div className=\"absolute top-2 left-2 flex flex-col gap-1\">\r\n                                    {story.video_url && (\r\n                                        <div className=\"p-1 bg-black/50 rounded\">\r\n                                            <Video size={12} className=\"text-white\" />\r\n                                        </div>\r\n                                    )}\r\n                                    {!story.is_active && (\r\n                                        <div className=\"px-2 py-0.5 bg-gray-500/80 rounded text-xs text-white\">\r\n                                            Inactiva\r\n                                        </div>\r\n                                    )}\r\n                                    {isExpired(story) && (\r\n                                        <div className=\"px-2 py-0.5 bg-red-500/80 rounded text-xs text-white\">\r\n                                            Expirada\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* View Count */}\r\n                                <div className=\"absolute top-2 right-2 flex items-center gap-1 px-2 py-1 bg-black/50 rounded text-xs text-white\">\r\n                                    <Eye size={12} />\r\n                                    {story.view_count || 0}\r\n                                </div>\r\n\r\n                                {/* Actions */}\r\n                                <div className=\"absolute inset-x-0 top-1/2 -translate-y-1/2 flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <button\r\n                                        onClick={() => handleEdit(story)}\r\n                                        className=\"p-2 bg-white/20 hover:bg-white/30 rounded-full backdrop-blur-sm transition-colors\"\r\n                                        title=\"Editar\"\r\n                                    >\r\n                                        <Edit2 size={16} className=\"text-white\" />\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setDeleteConfirm(story)}\r\n                                        className=\"p-2 bg-red-500/50 hover:bg-red-500/70 rounded-full backdrop-blur-sm transition-colors\"\r\n                                        title=\"Eliminar\"\r\n                                    >\r\n                                        <Trash2 size={16} className=\"text-white\" />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Expiration Badge */}\r\n                                {story.expires_at && (\r\n                                    <div className=\"absolute bottom-2 right-2 flex items-center gap-1 px-2 py-1 bg-black/50 rounded text-xs text-white\">\r\n                                        <Calendar size={10} />\r\n                                        {formatDate(story.expires_at)}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Story Form Modal */}\r\n            <StoryForm\r\n                isOpen={isFormOpen}\r\n                onClose={() => {\r\n                    setIsFormOpen(false);\r\n                    setEditingStory(null);\r\n                }}\r\n                onSubmit={handleSubmit}\r\n                story={editingStory}\r\n                dishes={dishes}\r\n                loading={submitting}\r\n            />\r\n\r\n            {/* Delete Confirmation */}\r\n            <ConfirmDialog\r\n                isOpen={!!deleteConfirm}\r\n                onClose={() => setDeleteConfirm(null)}\r\n                onConfirm={handleDelete}\r\n                title=\"Eliminar Story\"\r\n                message={`¿Estás seguro de que deseas eliminar la story \"${deleteConfirm?.title}\"? Esta acción no se puede deshacer.`}\r\n                confirmText=\"Eliminar\"\r\n                loading={submitting}\r\n                variant=\"danger\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":["React","useState","useMemo","Plus","Eye","Edit2","Trash2","Image","Video","Calendar","Loader2","AlertCircle","useStories","Story","StoryFormData","useDishes","StoryForm","ConfirmDialog","STORY_TYPE_LABELS","Record","dish","promo","chef","event","STORY_TYPE_COLORS","StoriesManagementPage","stories","loading","error","fetchStories","createStory","updateStory","deleteStory","dishes","isFormOpen","setIsFormOpen","editingStory","setEditingStory","deleteConfirm","setDeleteConfirm","filterType","setFilterType","submitting","setSubmitting","filteredStories","filter","s","type","stats","activeStories","is_active","totalViews","reduce","sum","view_count","expiredStories","expires_at","Date","total","length","active","views","expired","handleCreate","handleEdit","story","handleDelete","success","id","handleSubmit","data","Promise","formatDate","dateString","toLocaleDateString","day","month","year","isExpired","toLocaleString","e","target","value","map","video_url","currentTarget","play","pause","currentTime","image_url","title"],"mappings":"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","ignoreList":[]}}]
}